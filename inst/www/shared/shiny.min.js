/*! shiny 1.7.5.9000 | (c) 2012-2023 RStudio, PBC. | License: GPL-3 | file LICENSE */
"use strict";(()=>{var lr=Object.create;var An=Object.defineProperty;var dr=Object.getOwnPropertyDescriptor;var pr=Object.getOwnPropertyNames;var cr=Object.getPrototypeOf,mr=Object.prototype.hasOwnProperty;var fr=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var gr=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of pr(e))!mr.call(n,r)&&r!==t&&An(n,r,{get:()=>e[r],enumerable:!(i=dr(e,r))||i.enumerable});return n};var M=(n,e,t)=>(t=n!=null?lr(cr(n)):{},gr(e||!n||!n.__esModule?An(t,"default",{value:n,enumerable:!0}):t,n));var E=fr((Gr,Vn)=>{Vn.exports=window.jQuery});var _n=M(E());function Nn(){(0,_n.default)(document).on("submit","form:not([action])",function(n){n.preventDefault()})}var zn=M(E());function Qn(){let n=window.history.pushState;window.history.pushState=function(...e){let t=n.apply(this,e);return(0,zn.default)(document).trigger("pushstate"),t}}var bt=M(E());var Jn=!1,Un=!1,Fn=-1;function on(n){Jn=n}function qn(n){Un=n}function jn(n){Fn=n}function Xn(){return Jn}function Le(){return Un}function Wn(){return Fn}var W;function Gn(n){W=n}function hr(){let n=W.indexOf("MSIE ");if(Le()&&n>0)return parseInt(W.substring(n+5,W.indexOf(".",n)),10);if(W.indexOf("Trident/")>0){let t=W.indexOf("rv:");return parseInt(W.substring(t+3,W.indexOf(".",t)),10)}return-1}function Yn(){/\bQt\//.test(W)?((0,bt.default)(document.documentElement).addClass("qt"),on(!0)):on(!1),/\bQt/.test(W)&&/\bMacintosh/.test(W)&&(0,bt.default)(document.documentElement).addClass("qtmac"),/\bQt\/5/.test(W)&&/Linux/.test(W)&&(0,bt.default)(document.documentElement).addClass("qt5"),qn(/MSIE|Trident|Edge/.test(W)),jn(hr())}function Kn(){return window.Shiny||(window.Shiny={}),window.Shiny}var rr=M(E());var We=M(E());function sn(){return window.devicePixelRatio}function ie(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function v(n,e){return Object.prototype.hasOwnProperty.call(n,e)&&n[e]!==void 0}function F(n,e){return n===void 0?e:n}function ei(n){let e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","/":"&#x2F;"};return n.replace(/[&<>'"/]/g,function(t){return e[t]})}function vt(){return Math.floor(4294967296+Math.random()*64424509440).toString(16)}function Pe(n){if(!(!n||!n.toLowerCase))switch(n.toLowerCase()){case"true":return!0;case"false":return!1;default:return}}function ce(n,e){let t;if("currentStyle"in n)t=n.currentStyle[e];else{let i=document?.defaultView?.getComputedStyle(n,null);i&&(t=i.getPropertyValue(e))}return t}function Zn(n,e){let t=n.toString();for(;t.length<e;)t="0"+t;return t}function un(n,e=1){if(e<1)throw"Significant digits must be at least 1.";return parseFloat(n.toPrecision(e))}function ti(n){let e=new Date(n);return e.toString()==="Invalid Date"&&(e=new Date(n.replace(/-/g,"/"))),e}function ae(n){return n instanceof Date?n.getUTCFullYear()+"-"+Zn(n.getUTCMonth()+1,2)+"-"+Zn(n.getUTCDate(),2):null}function ni(n,e){let t={};return function(){let i=n.getBoundingClientRect(),r={w:i.width,h:i.height};r.w===0&&r.h===0||r.w===t.w&&r.h===t.h||(t=r,e(r.w,r.h))}}function ln(){return sn()?Math.round(sn()*100)/100:1}function ii(n){let e=n.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b"),t;try{t=new Function(`with (this) {
        try {
          return (${n});
        } catch (e) {
          console.error('Error evaluating expression: ${e}');
          throw e;
        }
      }`)}catch(i){throw console.error("Error parsing expression: "+n),i}return function(i){return t.call(i)}}function Ge(n){return n==null?[]:Array.isArray(n)?n:[n]}function ri(n,e){function t(i,r){let s=0,a=0,o=[];for(;s<i.length&&a<r.length;)e(i[s],r[a])<=0?o.push(i[s++]):o.push(r[a++]);for(;s<i.length;)o.push(i[s++]);for(;a<r.length;)o.push(r[a++]);return o}n=n.slice(0);for(let i=1;i<n.length;i*=2)for(let r=0;r<n.length;r+=i*2){let s=n.slice(r,r+i),a=n.slice(r+i,r+i*2),o=t(s,a),u=[r,o.length];Array.prototype.push.apply(u,o),Array.prototype.splice.apply(n,u)}return n}function w(n){return typeof n>"u"?n:n.replace(/([!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g,"\\$1")}function ue(n,e){let t={};return Object.keys(n).forEach(i=>{t[i]=e(n[i],i,n)}),t}function oi(n){return typeof n=="number"&&isNaN(n)}function an(n,e){if(We.default.type(n)==="object"&&We.default.type(e)==="object"){let t=n,i=e;if(Object.keys(t).length!==Object.keys(i).length)return!1;for(let r in t)if(!ie(i,r)||!an(t[r],i[r]))return!1;return!0}else if(We.default.type(n)==="array"&&We.default.type(e)==="array"){let t=n,i=e;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(!an(t[r],i[r]))return!1;return!0}else return n===e}function dn(...n){if(n.length<2)throw new Error("equal requires at least two arguments.");for(let e=0;e<n.length-1;e++)if(!an(n[e],n[e+1]))return!1;return!0}var si=function(n,e,t){function i(a){return(a+"").replace(/-/,".").replace(/(\.0)+[^.]*$/,"").split(".")}function r(a,o){let u=i(a),l=i(o),d=Math.min(u.length,l.length),p;for(let c=0;c<d;c++)if(p=parseInt(u[c],10)-parseInt(l[c],10),p!==0)return p;return u.length-l.length}let s=r(n,t);if(e==="==")return s===0;if(e===">=")return s>=0;if(e===">")return s>0;if(e==="<=")return s<=0;if(e==="<")return s<0;throw`Unknown operator: ${e}`};function q(n,e){if(typeof n>"u")return;if(e.length!==1)throw new Error("labelNode must be of length 1");Array.isArray(n)&&n.length===0?e.addClass("shiny-label-null"):(e.text(n),e.removeClass("shiny-label-null"))}function Ye(n){let e=document.createElement("a");e.href="/";let t=document.createElement("div");t.style.setProperty("position","absolute","important"),t.style.setProperty("top","-1000px","important"),t.style.setProperty("left","0","important"),t.style.setProperty("width","30px","important"),t.style.setProperty("height","10px","important"),t.appendChild(e),n.appendChild(t);let i=window.getComputedStyle(e).getPropertyValue("color");return n.removeChild(t),i}function pn(){return!window.bootstrap}var Fe=class{constructor(){this.bindings=[];this.bindingNames={}}register(e,t,i=0){let r={binding:e,priority:i};this.bindings.unshift(r),t&&(this.bindingNames[t]=r,e.name=t)}setPriority(e,t){let i=this.bindingNames[e];if(!i)throw"Tried to set priority on unknown binding "+e;i.priority=t||0}getPriority(e){let t=this.bindingNames[e];return t?t.priority:!1}getBindings(){return ri(this.bindings,function(e,t){return t.priority-e.priority})}};var P=class{find(e){throw"Not implemented"}getId(e){return e.getAttribute("data-input-id")||e.id}getType(e){return null}getValue(e){throw"Not implemented"}subscribe(e,t){}unsubscribe(e){}receiveMessage(e,t){throw"Not implemented"}getState(e){throw"Not implemented"}getRatePolicy(e){return null}initialize(e){}dispose(e){}};var Re=M(E());var It=class extends P{find(e){return(0,Re.default)(e).find('input[type="checkbox"]')}getValue(e){return e.checked}setValue(e,t){e.checked=t}subscribe(e,t){(0,Re.default)(e).on("change.checkboxInputBinding",function(){t(!0)})}unsubscribe(e){(0,Re.default)(e).off(".checkboxInputBinding")}getState(e){return{label:(0,Re.default)(e).parent().find("span").text(),value:e.checked}}receiveMessage(e,t){v(t,"value")&&(e.checked=t.value),v(t,"label")&&(0,Re.default)(e).parent().find("span").text(t.label),(0,Re.default)(e).trigger("change")}};var K=M(E());function ai(n){return(0,K.default)(n).find('label[for="'+w(n.id)+'"]')}function yr(n){let e=n.parentNode;return e.tagName==="LABEL"?(0,K.default)(e).find("span").text().trim():null}var Tt=class extends P{find(e){return(0,K.default)(e).find(".shiny-input-checkboxgroup")}getValue(e){let t=(0,K.default)('input:checkbox[name="'+w(e.id)+'"]:checked'),i=new Array(t.length);for(let r=0;r<t.length;r++)i[r]=t[r].value;return i}setValue(e,t){if(t=t??[],(0,K.default)('input:checkbox[name="'+w(e.id)+'"]').prop("checked",!1),t instanceof Array)for(let i=0;i<t.length;i++)(0,K.default)('input:checkbox[name="'+w(e.id)+'"][value="'+w(t[i])+'"]').prop("checked",!0);else(0,K.default)('input:checkbox[name="'+w(e.id)+'"][value="'+w(t)+'"]').prop("checked",!0)}getState(e){let t=(0,K.default)('input:checkbox[name="'+w(e.id)+'"]'),i=new Array(t.length);for(let r=0;r<i.length;r++)i[r]={value:t[r].value,label:yr(t[r])};return{label:ai(e).text(),value:this.getValue(e),options:i}}receiveMessage(e,t){let i=(0,K.default)(e);v(t,"options")&&(i.find("div.shiny-options-group").remove(),i.find("label.checkbox").remove(),i.append(t.options)),v(t,"value")&&this.setValue(e,t.value),q(t.label,ai(e)),(0,K.default)(e).trigger("change")}subscribe(e,t){(0,K.default)(e).on("change.checkboxGroupInputBinding",function(){t(!1)})}unsubscribe(e){(0,K.default)(e).off(".checkboxGroupInputBinding")}};var Ke=M(E());var $e=M(E());function ui(n){return(0,$e.default)(n).parent().find('label[for="'+w(n.id)+'"]')}var Oe=class extends P{find(e){return(0,$e.default)(e).find('input[type="text"], input[type="search"], input[type="url"], input[type="email"]').not('input[type="text"][id$="-selectized"]')}getId(e){return super.getId(e)||e.name}getValue(e){throw"not implemented"}setValue(e,t){throw"not implemented"}subscribe(e,t){(0,$e.default)(e).on("keyup.textInputBinding input.textInputBinding",function(){t(!0)}),(0,$e.default)(e).on("change.textInputBinding",function(){t(!1)})}unsubscribe(e){(0,$e.default)(e).off(".textInputBinding")}receiveMessage(e,t){throw"not implemented"}getState(e){throw"not implemented"}getRatePolicy(e){return{policy:"debounce",delay:250}}},we=class extends Oe{setValue(e,t){e.value=t}getValue(e){return e.value}getState(e){return{label:ui(e).text(),value:e.value,placeholder:e.placeholder}}receiveMessage(e,t){v(t,"value")&&this.setValue(e,t.value),q(t.label,ui(e)),v(t,"placeholder")&&(e.placeholder=t.placeholder),(0,$e.default)(e).trigger("change")}};function li(n){return(0,Ke.default)(n).parent().find('label[for="'+w(n.id)+'"]')}var wt=class extends Oe{find(e){return(0,Ke.default)(e).find('input[type="number"]')}getValue(e){let t=(0,Ke.default)(e).val();if(typeof t=="string"&&/^\s*$/.test(t))return null;let i=Number(t);return isNaN(i)?t:i}setValue(e,t){e.value=""+t}getType(e){return"shiny.number"}receiveMessage(e,t){v(t,"value")&&(e.value=t.value??""),v(t,"min")&&(e.min=t.min??""),v(t,"max")&&(e.max=t.max??""),v(t,"step")&&(e.step=t.step??""),q(t.label,li(e)),(0,Ke.default)(e).trigger("change")}getState(e){return{label:li(e).text(),value:this.getValue(e),min:Number(e.min),max:Number(e.max),step:Number(e.step)}}};var di=M(E());var xt=class extends we{find(e){return(0,di.default)(e).find('input[type="password"]')}getType(e){return"shiny.password"}};var pi=M(E());var Et=class extends we{find(e){return(0,pi.default)(e).find("textarea")}};var re=M(E());function ci(n){return(0,re.default)(n).parent().find('label[for="'+w(n.id)+'"]')}function br(n){let e=n.parentNode;return e.tagName==="LABEL"?(0,re.default)(e).find("span").text().trim():null}var Mt=class extends P{find(e){return(0,re.default)(e).find(".shiny-input-radiogroup")}getValue(e){let t=(0,re.default)('input:radio[name="'+w(e.id)+'"]:checked');return t.length===0?null:t.val()}setValue(e,t){Array.isArray(t)&&t.length===0?(0,re.default)('input:radio[name="'+w(e.id)+'"]').prop("checked",!1):(0,re.default)('input:radio[name="'+w(e.id)+'"][value="'+w(t)+'"]').prop("checked",!0)}getState(e){let t=(0,re.default)('input:radio[name="'+w(e.id)+'"]'),i=new Array(t.length);for(let r=0;r<i.length;r++)i[r]={value:t[r].value,label:br(t[r])};return{label:ci(e).text(),value:this.getValue(e),options:i}}receiveMessage(e,t){let i=(0,re.default)(e);v(t,"options")&&(i.find("div.shiny-options-group").remove(),i.find("label.radio").remove(),i.append(t.options)),v(t,"value")&&this.setValue(e,t.value),q(t.label,ci(e)),(0,re.default)(e).trigger("change")}subscribe(e,t){(0,re.default)(e).on("change.radioInputBinding",function(){t(!1)})}unsubscribe(e){(0,re.default)(e).off(".radioInputBinding")}};var $=M(E());var Ze=class extends P{find(e){return(0,$.default)(e).find(".shiny-date-input")}getType(e){return"shiny.date"}subscribe(e,t){(0,$.default)(e).on("keyup.dateInputBinding input.dateInputBinding",function(){t(!0)}),(0,$.default)(e).on("changeDate.dateInputBinding change.dateInputBinding",function(){t(!1)})}unsubscribe(e){(0,$.default)(e).off(".dateInputBinding")}getRatePolicy(){return{policy:"debounce",delay:250}}setValue(e,t){throw"not implemented"}initialize(e){let t=(0,$.default)(e).find("input"),i=t.data("initial-date");i==null&&(i=this._floorDateTime(this._dateAsUTC(new Date))),this.setValue(e,i),t.data("min-date")!==void 0&&this._setMin(t[0],t.data("min-date")),t.data("max-date")!==void 0&&this._setMax(t[0],t.data("max-date"))}_getLabelNode(e){return(0,$.default)(e).find('label[for="'+w(e.id)+'"]')}_formatToString(e){let t="",i;for(i=0;i<e.parts.length;i++)t+=e.separators[i]+e.parts[i];return t+=e.separators[i],t}_setMin(e,t){if(t===null){(0,$.default)(e).bsDatepicker("setStartDate",null);return}let i=this._newDate(t);if(i===null||(t=i,isNaN(t.valueOf())))return;let r=(0,$.default)(e).bsDatepicker("getUTCDate");(0,$.default)(e).bsDatepicker("setStartDate",this._utcDateAsLocal(t)),t&&r&&t.getTime()>r.getTime()?(0,$.default)(e).bsDatepicker("clearDates"):(0,$.default)(e).bsDatepicker("setUTCDate",r)}_setMax(e,t){if(t===null){(0,$.default)(e).bsDatepicker("setEndDate",null);return}let i=this._newDate(t);if(i===null||(t=i,isNaN(t.valueOf())))return;let r=(0,$.default)(e).bsDatepicker("getUTCDate");(0,$.default)(e).bsDatepicker("setEndDate",this._utcDateAsLocal(t)),t&&r&&t.getTime()<r.getTime()?(0,$.default)(e).bsDatepicker("clearDates"):(0,$.default)(e).bsDatepicker("setUTCDate",r)}_newDate(e){if(e instanceof Date)return e;if(!e)return null;let t=ti(e);return isNaN(t.valueOf())?null:t}_floorDateTime(e){return e=new Date(e.getTime()),e.setUTCHours(0,0,0,0),e}_dateAsUTC(e){return new Date(e.getTime()-e.getTimezoneOffset()*6e4)}_utcDateAsLocal(e){return new Date(e.getTime()+e.getTimezoneOffset()*6e4)}},St=class extends Ze{getValue(e){let t=(0,$.default)(e).find("input").bsDatepicker("getUTCDate");return ae(t)}setValue(e,t){if(t===null){(0,$.default)(e).find("input").val("").bsDatepicker("update");return}let i=this._newDate(t);i!==null&&(isNaN(i.valueOf())||(0,$.default)(e).find("input").bsDatepicker("setUTCDate",i))}getState(e){let i=(0,$.default)(e).find("input"),r=i.data("datepicker").startDate,s=i.data("datepicker").endDate;r=r===-1/0?null:ae(r),s=s===1/0?null:ae(s);let a=i.data("datepicker").startViewMode;return a===2?a="decade":a===1?a="year":a===0&&(a="month"),{label:this._getLabelNode(e).text(),value:this.getValue(e),valueString:i.val(),min:r,max:s,language:i.data("datepicker").language,weekstart:i.data("datepicker").weekStart,format:this._formatToString(i.data("datepicker").format),startview:a}}receiveMessage(e,t){let i=(0,$.default)(e).find("input");q(t.label,this._getLabelNode(e)),v(t,"min")&&this._setMin(i[0],t.min),v(t,"max")&&this._setMax(i[0],t.max),v(t,"value")&&this.setValue(e,t.value),(0,$.default)(e).trigger("change")}};var Q=M(E());function Dt(n){n.$cache&&n.$cache.input?n.$cache.input.trigger("change"):console.log("Couldn't force ion slider to update")}function mi(n,e,t){let i,r;return n==="date"?(i=window.strftime.utc(),r=function(s){return i(e,new Date(s))}):n==="datetime"?(t?i=window.strftime.timezone(t):i=window.strftime,r=function(s){return i(e,new Date(s))}):r=function(s){return Ir(s,this.prettify_separator)},r}function vr(n){return(0,Q.default)(n).parent().find('label[for="'+w(n.id)+'"]')}function cn(n){return(0,Q.default)(n).data("ionRangeSlider").options.type==="double"?2:1}var Ht=class extends Oe{find(e){return Q.default.fn.ionRangeSlider?(0,Q.default)(e).find("input.js-range-slider"):(0,Q.default)()}getType(e){let t=(0,Q.default)(e).data("data-type");return t==="date"?"shiny.date":t==="datetime"?"shiny.datetime":null}getValue(e){let t=(0,Q.default)(e),i=(0,Q.default)(e).data("ionRangeSlider").result,r,s=t.data("data-type");return s==="date"?r=function(a){return ae(new Date(Number(a)))}:s==="datetime"?r=function(a){return Number(a)/1e3}:r=function(a){return Number(a)},cn(e)===2?[r(i.from),r(i.to)]:r(i.from)}setValue(e,t){let i=(0,Q.default)(e),r=i.data("ionRangeSlider");i.data("immediate",!0);try{cn(e)===2&&t instanceof Array?r.update({from:t[0],to:t[1]}):r.update({from:t}),Dt(r)}finally{i.data("immediate",!1)}}subscribe(e,t){(0,Q.default)(e).on("change.sliderInputBinding",function(){t(!(0,Q.default)(e).data("immediate")&&!(0,Q.default)(e).data("animating"))})}unsubscribe(e){(0,Q.default)(e).off(".sliderInputBinding")}receiveMessage(e,t){let i=(0,Q.default)(e),r=i.data("ionRangeSlider"),s={};if(v(t,"value"))if(cn(e)===2&&t.value instanceof Array)s.from=t.value[0],s.to=t.value[1];else{if(Array.isArray(t.value))throw"Slider requires two values to update with an array, but message value was "+["an empty array.","a single-value array.","an array with more than two values."][Math.min(t.value.length,2)];s.from=t.value}let a=["min","max","step"];for(let p=0;p<a.length;p++){let c=a[p];v(t,c)&&(s[c]=t[c])}q(t.label,vr(e));let o=["data-type","time-format","timezone"];for(let p=0;p<o.length;p++){let c=o[p];v(t,c)&&i.data(c,t[c])}let u=i.data("data-type"),l=i.data("time-format"),d=i.data("timezone");s.prettify=mi(u,l,d),i.data("immediate",!0);try{r.update(s),Dt(r)}finally{i.data("immediate",!1)}}getRatePolicy(e){return{policy:"debounce",delay:250}}getState(e){}initialize(e){let t=(0,Q.default)(e),i=t.data("data-type"),r=t.data("time-format"),s=t.data("timezone"),a={prettify:mi(i,r,s)};t.ionRangeSlider(a)}};function Ir(n,e=",",t="."){let i=n.toString().split(".");return i[0]=i[0].replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+e),i.length===1?i[0]:i.length===2?i[0]+t+i[1]:""}(0,Q.default)(document).on("click",".slider-animate-button",function(n){n.preventDefault();let e=(0,Q.default)(this),t=(0,Q.default)("#"+w(e.attr("data-target-id"))),i="Play",r="Pause",s=e.attr("data-loop")!==void 0&&!/^\s*false\s*$/i.test(e.attr("data-loop")),a=e.attr("data-interval");if(isNaN(a)?a=1500:a=Number(a),t.data("animTimer"))clearTimeout(t.data("animTimer")),t.removeData("animTimer"),e.attr("title",i),e.removeClass("playing"),t.removeData("animating");else{let o;if(t.hasClass("jslider")){let u=t.slider();u.canStepNext()||u.resetToStart(),o=setInterval(function(){s&&!u.canStepNext()?u.resetToStart():(u.stepNext(),!s&&!u.canStepNext()&&e.click())},a)}else{let u=t.data("ionRangeSlider"),l=function(){return u.options.type==="double"?u.result.to<u.result.max:u.result.from<u.result.max},d=function(){let c={from:u.result.min};u.options.type==="double"&&(c.to=c.from+(u.result.to-u.result.from)),u.update(c),Dt(u)},p=function(){let c={from:Math.min(u.result.max,u.result.from+u.options.step)};u.options.type==="double"&&(c.to=Math.min(u.result.max,u.result.to+u.options.step)),u.update(c),Dt(u)};l()||d(),o=setInterval(function(){s&&!l()?d():(p(),!s&&!l()&&e.click())},a)}t.data("animTimer",o),e.attr("title",r),e.addClass("playing"),t.data("animating",!0)}});var le=M(E());function fi(n){return(0,le.default)(n).find('label[for="'+w(n.id)+'"]')}var Ct=class extends Ze{find(e){return(0,le.default)(e).find(".shiny-date-range-input")}getValue(e){let t=(0,le.default)(e).find("input"),i=t.eq(0).bsDatepicker("getUTCDate"),r=t.eq(1).bsDatepicker("getUTCDate");return[ae(i),ae(r)]}setValue(e,t){if(!(t instanceof Object))return;let i=(0,le.default)(e).find("input");if(t.start!==void 0)if(t.start===null)i.eq(0).val("").bsDatepicker("update");else{let r=this._newDate(t.start);i.eq(0).bsDatepicker("setUTCDate",r)}if(t.end!==void 0)if(t.end===null)i.eq(1).val("").bsDatepicker("update");else{let r=this._newDate(t.end);i.eq(1).bsDatepicker("setUTCDate",r)}}getState(e){let i=(0,le.default)(e).find("input"),r=i.eq(0),s=i.eq(1),a=r.bsDatepicker("getStartDate"),o=r.bsDatepicker("getEndDate"),u=a===-1/0?null:ae(a),l=o===1/0?null:ae(o),d=r.data("datepicker").startView;return d===2?d="decade":d===1?d="year":d===0&&(d="month"),{label:fi(e).text(),value:this.getValue(e),valueString:[r.val(),s.val()],min:u,max:l,weekstart:r.data("datepicker").weekStart,format:this._formatToString(r.data("datepicker").format),language:r.data("datepicker").language,startview:d}}receiveMessage(e,t){let i=(0,le.default)(e),r=i.find("input"),s=r.eq(0),a=r.eq(1);q(t.label,fi(e)),v(t,"min")&&(this._setMin(s[0],t.min),this._setMin(a[0],t.min)),v(t,"max")&&(this._setMax(s[0],t.max),this._setMax(a[0],t.max)),v(t,"value")&&this.setValue(e,t.value),i.trigger("change")}initialize(e){let i=(0,le.default)(e).find("input"),r=i.eq(0),s=i.eq(1),a=r.data("initial-date"),o=s.data("initial-date");a==null&&(a=this._dateAsUTC(new Date)),o==null&&(o=this._dateAsUTC(new Date)),this.setValue(e,{start:a,end:o}),this._setMin(r[0],r.data("min-date")),this._setMin(s[0],r.data("min-date")),this._setMax(r[0],s.data("max-date")),this._setMax(s[0],s.data("max-date"))}subscribe(e,t){(0,le.default)(e).on("keyup.dateRangeInputBinding input.dateRangeInputBinding",function(){t(!0)}),(0,le.default)(e).on("changeDate.dateRangeInputBinding change.dateRangeInputBinding",function(){t(!1)})}unsubscribe(e){(0,le.default)(e).off(".dateRangeInputBinding")}};var A=M(E());var Ae=eval;var mn;function gi(n){mn=n}function ye(){if(typeof mn>"u")throw"Shiny has not finish initialization yet. Please wait for the 'shiny-initialized' event.";return mn}function me(n,e,t){ye().setInputValue(n,e,t)}function Ve(){return ye().shinyapp}function hi(n){ye().user=n}function yi(n){ye().forgetLastInputValue(n)}function _e(n){ye().bindAll(n)}function U(n,e=!1){ye().unbindAll(n,e)}function et(n){ye().initializeInputs(n)}function bi(n,e){Ve().bindOutput(n,e)}function vi(n,e){return Ve().unbindOutput(n,e)}function Ii(){return ye().oncustommessage}var Ti;function wi(){return Ti}function xi(n){Ti=n}function Ei(){return ye().createSocket}function Mi(n){let e=w(n.id);return Si(n)&&(e+="-selectized"),(0,A.default)(n).parent().parent().find('label[for="'+e+'"]')}function Si(n){return(0,A.default)(n).parent().find('script[data-for="'+w(n.id)+'"]').length>0}var kt=class extends P{find(e){return(0,A.default)(e).find("select")}getType(e){let t=(0,A.default)(e);return t.hasClass("symbol")?t.attr("multiple")==="multiple"?"shiny.symbolList":"shiny.symbol":null}getId(e){return P.prototype.getId.call(this,e)||e.name}getValue(e){return(0,A.default)(e).val()}setValue(e,t){Si(e)?this._selectize(e)?.setValue(t):(0,A.default)(e).val(t)}getState(e){let t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]={value:e[i].value,label:e[i].label};return{label:Mi(e),value:this.getValue(e),options:t}}receiveMessage(e,t){let i=(0,A.default)(e);if(v(t,"options")&&(this._selectize(e)?.destroy(),i.empty().append(t.options),this._selectize(e)),v(t,"config")&&(i.parent().find('script[data-for="'+w(e.id)+'"]').replaceWith(t.config),this._selectize(e,!0)),v(t,"url")){let r=this._selectize(e);r.clearOptions();let s=!1;r.settings.load=function(a,o){let u=r.settings;A.default.ajax({url:t.url,data:{query:a,field:JSON.stringify([u.searchField]),value:u.valueField,conju:u.searchConjunction,maxop:u.maxOptions},type:"GET",error:function(){o()},success:function(l){A.default.each(l,function(d,p){let c=p[u.optgroupField||"optgroup"],f={};f[u.optgroupLabelField||"label"]=c,f[u.optgroupValueField||"value"]=c,r.addOptionGroup(c,f)}),o(l),s||(v(t,"value")?r.setValue(t.value):u.maxItems===1&&r.setValue(l[0].value)),s=!0}})},r.load(function(a){r.settings.load.apply(r,["",a])})}else v(t,"value")&&this.setValue(e,t.value);q(t.label,Mi(e)),(0,A.default)(e).trigger("change")}subscribe(e,t){(0,A.default)(e).on("change.selectInputBinding",()=>{e.nonempty&&this.getValue(e)===""||t(!1)})}unsubscribe(e){(0,A.default)(e).off(".selectInputBinding")}initialize(e){this._selectize(e)}_selectize(e,t=!1){if(!A.default.fn.selectize)return;let i=(0,A.default)(e),r=i.parent().find('script[data-for="'+w(e.id)+'"]');if(r.length===0)return;let s=A.default.extend({labelField:"label",valueField:"value",searchField:["label"]},JSON.parse(r.html()));typeof r.data("nonempty")<"u"?(e.nonempty=!0,s=A.default.extend(s,{onItemRemove:function(o){this.getValue()===""&&(0,A.default)("select#"+w(e.id)).empty().append((0,A.default)("<option/>",{value:o,selected:!0})).trigger("change")},onDropdownClose:function(){this.getValue()===""&&this.setValue((0,A.default)("select#"+w(e.id)).val())}})):e.nonempty=!1,r.data("eval")instanceof Array&&A.default.each(r.data("eval"),function(o,u){s[u]=Ae("("+s[u]+")")});let a=this._newSelectize(i,s);if(t){let o=A.default.extend(a.settings,s);a.destroy(),a=this._newSelectize(i,o)}return a}_newSelectize(e,t){let i=e.data("shiny-input-binding");i&&U(e.parent());let r=e.selectize(t)[0].selectize;return i&&_e(e.parent()),r}};var fe=M(E());var Bt=class extends P{find(e){return(0,fe.default)(e).find(".action-button")}getValue(e){return(0,fe.default)(e).data("val")||0}setValue(e,t){(0,fe.default)(e).data("val",t)}getType(e){return"shiny.action"}subscribe(e,t){(0,fe.default)(e).on("click.actionButtonInputBinding",function(){let i=(0,fe.default)(this),r=i.data("val")||0;i.data("val",r+1),t(!1)})}getState(e){return{value:this.getValue(e)}}receiveMessage(e,t){let i=(0,fe.default)(e),r=i.text(),s="";if(i.find("i[class]").length>0){let a=i.find("i[class]")[0];a===i.children()[0]&&(s=(0,fe.default)(a).prop("outerHTML"))}v(t,"label")&&(r=t.label),v(t,"icon")&&(s=Array.isArray(t.icon)?"":t.icon??""),i.html(s+" "+r)}unsubscribe(e){(0,fe.default)(e).off(".actionButtonInputBinding")}};(0,fe.default)(document).on("click","a.action-button",function(n){n.preventDefault()});var oe=M(E());function Di(n){return n.attr("data-value")||n.text()}var Lt=class extends P{find(e){return(0,oe.default)(e).find("ul.nav.shiny-tab-input")}getValue(e){let t=pn()?(0,oe.default)(e).find("li:not(.dropdown).active > a"):(0,oe.default)(e).find(".nav-link:not(.dropdown-toggle).active, .dropdown-menu .dropdown-item.active");return t.length===1?Di(t):null}setValue(e,t){let i=!1;t&&(pn()?(0,oe.default)(e).find("li:not(.dropdown) > a"):(0,oe.default)(e).find(".nav-link:not(.dropdown-toggle), .dropdown-menu .dropdown-item")).each(function(){if(Di((0,oe.default)(this))===t)return(0,oe.default)(this).tab("show"),i=!0,!1}),i||(0,oe.default)(e).trigger("change")}getState(e){return{value:this.getValue(e)}}receiveMessage(e,t){v(t,"value")&&this.setValue(e,t.value),(0,oe.default)(e).trigger("change")}subscribe(e,t){(0,oe.default)(e).on("change shown.bootstrapTabInputBinding shown.bs.tab.bootstrapTabInputBinding",function(){t(!1)})}unsubscribe(e){(0,oe.default)(e).off(".bootstrapTabInputBinding")}};var j=M(E());var ge=M(E());var fn=M(E());function Hi(n,e,t,i,r,s){let a=fn.default.Event("shiny:inputchanged");return a.name=n,a.value=e,a.binding=t,a.el=i,a.inputType=r,(0,fn.default)(s).trigger(a),a}var gn=class{constructor(e,t=!0){this.fileIndex=-1;this.aborted=!1;this.completed=!1;this.files=Array.from(e),t&&this.$run()}onBegin(e,t){setTimeout(t,0)}onFile(e,t){setTimeout(t,0)}onComplete(){}onAbort(){}abort(){this.completed||this.aborted||(this.aborted=!0,this.onAbort())}$getRun(){let e=!1;return()=>{e||(e=!0,this.$run())}}$run(){if(this.aborted||this.completed)return;if(this.fileIndex<0){this.fileIndex=0,this.onBegin(this.files,this.$getRun());return}if(this.fileIndex===this.files.length){this.completed=!0,this.onComplete();return}let e=this.files[this.fileIndex++];this.onFile(e,this.$getRun())}},tt=class extends gn{constructor(t,i,r,s){super(r,!1);this.shinyapp=t,this.id=i,this.el=s,this.$run()}makeRequest(t,i,r,s,a){this.shinyapp.makeRequest(t,i,r,s,a)}onBegin(t,i){this.$setError(null),this.$setActive(!0),this.$setVisible(!0),this.onProgress(null,0),this.totalBytes=0,this.progressBytes=0,ge.default.each(t,(s,a)=>{this.totalBytes+=a.size});let r=ge.default.map(t,function(s){return{name:s.name,size:s.size,type:s.type}});this.makeRequest("uploadInit",[r],s=>{this.jobId=s.jobId,this.uploadUrl=s.uploadUrl,i()},s=>{this.onError(s)},void 0)}onFile(t,i){this.onProgress(t,0),ge.default.ajax(this.uploadUrl,{type:"POST",cache:!1,xhr:()=>{if(typeof ge.default.ajaxSettings.xhr!="function")throw"jQuery's XHR is not a function";let r=ge.default.ajaxSettings.xhr();return r.upload&&(r.upload.onprogress=s=>{s.lengthComputable&&this.onProgress(t,(this.progressBytes+s.loaded)/this.totalBytes)}),r},data:t,contentType:"application/octet-stream",processData:!1,success:()=>{this.progressBytes+=t.size,i()},error:(r,s,a)=>{this.onError(r.responseText||s)}})}onComplete(){let t=ge.default.map(this.files,function(r,s){return{name:r.name,size:r.size,type:r.type}}),i=Hi(this.id,t,wi(),this.el,"shiny.fileupload",document);this.makeRequest("uploadEnd",[this.jobId,this.id],()=>{this.$setActive(!1),this.onProgress(null,1),this.$bar().text("Upload complete"),(0,ge.default)(i.el).val("")},r=>{this.onError(r)},void 0),this.$bar().text("Finishing upload")}onError(t){this.$setError(t||""),this.$setActive(!1)}onAbort(){this.$setVisible(!1)}onProgress(t,i){this.$bar().width(Math.round(i*100)+"%"),this.$bar().text(t?t.name:"")}$container(){return(0,ge.default)("#"+w(this.id)+"_progress.shiny-file-input-progress")}$bar(){return(0,ge.default)("#"+w(this.id)+"_progress.shiny-file-input-progress .progress-bar")}$setVisible(t){this.$container().css("visibility",t?"visible":"hidden")}$setError(t){this.$bar().toggleClass("progress-bar-danger",t!==null),t!==null&&(this.onProgress(null,1),this.$bar().text(t))}$setActive(t){this.$container().toggleClass("active",!!t)}};var Pt="shiny-file-input-active",Rt="shiny-file-input-over";function nt(n){return(0,j.default)(n).closest("div.input-group")}function Ci(n){let e=(0,j.default)(n),t=0;return e.on({"dragenter.draghover":i=>{t++===0&&e.trigger("draghover:enter",i)},"dragleave.draghover":i=>{--t===0&&e.trigger("draghover:leave",i),t<0&&console.error("draghover childCounter is negative somehow")},"dragover.draghover":i=>{i.preventDefault()},"drop.draghover":i=>{t=0,e.trigger("draghover:drop",i),i.preventDefault()}}),e}function ki(n){return(0,j.default)(n).off(".draghover")}function Tr(){let n=(0,j.default)("html");Ci(n).on({"draghover:enter.draghover":()=>{nt(be).addClass(Pt)},"draghover:leave.draghover":()=>{nt(be).removeClass(Pt)},"draghover:drop.draghover":()=>{nt(be).removeClass(Rt).removeClass(Pt)}})}function wr(){let n=(0,j.default)("html");n.off(".draghover"),ki(n)}function xr(n){let e=document.createElement("input");e.type="file";try{e.files=n}catch{return!1}return!0}function Er(n,e){let t=n.originalEvent?.dataTransfer?.files,i=(0,j.default)(e);t==null?console.log("Dropping files is not supported on this browser. (no FileList)"):xr(t)?(i.val(""),e.files=t,i.trigger("change")):(i.val(""),Mr(e,t))}function Bi(n,e){let t=n.closest("div.input-group").find("input[type=text]");e.length===1?t.val(e[0].name):t.val(e.length+" files")}function Li(n){let e=n.data("currentUploader");e&&e.abort(),n.removeAttr("data-restore")}function Mr(n,e){let t=(0,j.default)(n);Li(t),Bi(t,e),t.data("currentUploader",new tt(Ve(),hn(n),e,n))}function Sr(n){let e=(0,j.default)(n.target);Li(e);let t=n.target.files,i=hn(n.target);t.length!==0&&(Bi(e,t),e.data("currentUploader",new tt(Ve(),i,t,n.target)))}var be=(0,j.default)();function hn(n){return P.prototype.getId.call(this,n)||n.name}var $t=class extends P{find(e){return(0,j.default)(e).find('input[type="file"]')}getId(e){return hn(e)}getValue(e){let t=(0,j.default)(e).attr("data-restore");if(t){let i=JSON.parse(t),r=(0,j.default)(e).closest("div.input-group").find("input[type=text]");i.name.length===1?r.val(i.name[0]):r.val(i.name.length+" files");let s=(0,j.default)(e).closest("div.form-group").find(".progress"),a=s.find(".progress-bar");return s.removeClass("active"),a.width("100%"),a.css("visibility","visible"),i}else return null}setValue(e,t){}getType(e){return"shiny.file"}subscribe(e,t){(0,j.default)(e).on("change.fileInputBinding",Sr),be.length===0&&Tr(),be=be.add(e);let i=nt(e);Ci(i).on({"draghover:enter.draghover":r=>{i.addClass(Rt)},"draghover:leave.draghover":r=>{i.removeClass(Rt),r.stopPropagation()},"draghover:drop.draghover":(r,s)=>{Er(s,e)}})}unsubscribe(e){let t=(0,j.default)(e),i=nt(e);i.removeClass(Rt).removeClass(Pt),ki(i),t.off(".fileInputBinding"),i.off(".draghover"),be=be.not(e),be.length===0&&wr()}};function Pi(){let n=new Fe;n.register(new we,"shiny.textInput"),n.register(new Et,"shiny.textareaInput"),n.register(new xt,"shiny.passwordInput"),n.register(new wt,"shiny.numberInput"),n.register(new It,"shiny.checkboxInput"),n.register(new Tt,"shiny.checkboxGroupInput"),n.register(new Mt,"shiny.radioInput"),n.register(new Ht,"shiny.sliderInput"),n.register(new St,"shiny.dateInput"),n.register(new Ct,"shiny.dateRangeInput"),n.register(new kt,"shiny.selectInput"),n.register(new Bt,"shiny.actionButtonInput"),n.register(new Lt,"shiny.bootstrapTabInput");let e=new $t;return n.register(e,"shiny.fileInputBinding"),{inputBindings:n,fileInputBinding:e}}var yn=M(E());var Ne=M(E());var J=class{find(e){throw"Not implemented"}renderValue(e,t){throw"Not implemented"}getId(e){return e.getAttribute("data-input-id")||e.id}async onValueChange(e,t){this.clearError(e),await this.renderValue(e,t)}onValueError(e,t){this.renderError(e,t)}renderError(e,t){if(this.clearError(e),t.message===""){(0,Ne.default)(e).empty();return}let i="shiny-output-error";t.type!==null&&(i=i+" "+Ne.default.map(Ge(t.type),function(r){return i+"-"+r}).join(" ")),(0,Ne.default)(e).addClass(i).text(t.message)}clearError(e){(0,Ne.default)(e).attr("class",function(t,i){return i.replace(/(^|\s)shiny-output-error\S*/g,"")})}showProgress(e,t){let i="recalculating";t?(0,Ne.default)(e).addClass(i):(0,Ne.default)(e).removeClass(i)}};var Ot=class extends J{find(e){return(0,yn.default)(e).find(".shiny-text-output")}renderValue(e,t){(0,yn.default)(e).text(t)}};var qe=M(E());var At=class extends J{find(e){return(0,qe.default)(e).find("a.shiny-download-link")}renderValue(e,t){(0,qe.default)(e).attr("href",t)}};(0,qe.default)(document).on("click.shinyDownloadLink","a.shiny-download-link",function(n){let e=qe.default.Event("shiny:filedownload");e.name=this.id,e.href=this.href,(0,qe.default)(document).trigger(e)});var he=M(E());var Z=class{constructor(e,t,i){this.target=e,this.func=t,this.delayMs=i,this.timerId=null,this.args=null}normalCall(...e){this.$clearTimer(),this.args=e,this.timerId=setTimeout(()=>{this.timerId!==null&&(this.$clearTimer(),this.$invoke())},this.delayMs)}immediateCall(...e){this.$clearTimer(),this.args=e,this.$invoke()}isPending(){return this.timerId!==null}$clearTimer(){this.timerId!==null&&(clearTimeout(this.timerId),this.timerId=null)}$invoke(){this.args&&this.args.length>0?this.func.apply(this.target,this.args):this.func.apply(this.target),this.args=null}};function xe(n,e){let t=null;return function i(...r){t!==null&&(clearTimeout(t),t=null),t=setTimeout(()=>{t!==null&&(t=null,e.apply(i,r))},n)}}var it=class{constructor(e,t){this.target=e,this.func=t}normalCall(...e){this.func.apply(this.target,e)}immediateCall(...e){this.func.apply(this.target,e)}};var Ee=class{constructor(e,t,i){this.target=e,this.func=t,this.delayMs=i,this.timerId=null,this.args=null}normalCall(...e){this.args=e,this.timerId===null&&this.$invoke()}immediateCall(...e){this.$clearTimer(),this.args=e,this.$invoke()}isPending(){return this.args!==null}$clearTimer(){this.timerId!==null&&(clearTimeout(this.timerId),this.timerId=null)}$invoke(){this.args!==null&&(this.func.apply(this.target,this.args),this.args=null,this.timerId=setTimeout(()=>{this.timerId!==null&&(this.$clearTimer(),this.isPending()&&this.$invoke())},this.delayMs))}};var Vt=class extends J{find(e){return(0,he.default)(e).find(".shiny-datatable-output")}onValueError(e,t){U(e),this.renderError(e,t)}renderValue(e,t){let i=(0,he.default)(e).empty();if(!t||!t.colnames)return;let r=he.default.makeArray(t.colnames),s=he.default.map(r,function(p){return"<th>"+p+"</th>"}).join("");s="<thead><tr>"+s+"</tr></thead>";let a="";(t.options?.searching??!0)&&(a=he.default.map(r,function(p){return'<th><input type="text" placeholder="'+ei(p.replace(/(<([^>]+)>)/gi,""))+'" /></th>'}).join(""),a="<tfoot>"+a+"</tfoot>");let o='<table class="table table-striped table-hover">'+s+a+"</table>";i.append(o),t.evalOptions&&he.default.each(t.evalOptions,function(p,c){t.options[c]=Ae("("+t.options[c]+")")});let u=t.options?.search?.caseInsensitive!==!1,l=(0,he.default)(e).children("table").DataTable(he.default.extend({processing:!0,serverSide:!0,order:[],orderClasses:!1,pageLength:25,ajax:{url:t.action,type:"POST",data:function(p){p.search||(p.search={}),p.search.caseInsensitive=u,p.escape=t.escape}}},t.options));if(typeof t.callback=="string"){let p=Ae("("+t.callback+")");typeof p=="function"&&p(l)}i.find("label input").first().unbind("keyup").keyup(xe(t.searchDelay,function(){l.search(this.value).draw()}));let d=i.find("tfoot input");d.length>0&&(he.default.each(l.settings()[0].aoColumns,function(p,c){c.bSearchable||d.eq(p).hide()}),d.keyup(xe(t.searchDelay,function(){l.column(d.index(this)).search(this.value).draw()}))),i.parents(".tab-content").css("overflow","visible")}};var Ji=M(E());var ee=M(E());var bn=class{setImageSend(e,t){let i=new Z(null,t,0);return this.regular=function(){i.normalCall()},e.lastChanceCallback.push(function(){i.isPending()&&i.immediateCall()}),this.transitioned=xe(200,this.regular),i}},de=new bn;var ve=M(E()),Dr=/<!--(SHINY.SINGLETON\[([\w]+)\])-->([\s\S]*?)<!--\/\1-->/,Hr=/<head(?:\s[^>]*)?>([\s\S]*?)<\/head>/,_t={};function vn(n,e,t){let i=Br(n);switch(kr(i.head),Cr(i.singletons),t.toLowerCase()){case"replace":(0,ve.default)(e).html(i.html);break;case"beforebegin":(0,ve.default)(e).before(i.html);break;case"afterbegin":(0,ve.default)(e).prepend(i.html);break;case"beforeend":(0,ve.default)(e).append(i.html);break;case"afterend":(0,ve.default)(e).after(i.html);break;default:throw new Error("Unknown where position: "+t)}return i}function Cr(n){ve.default.extend(_t,n)}function Ri(n){if(typeof n=="string")_t[n]=!0;else if(n instanceof Array)for(let e=0;e<n.length;e++)_t[n[e]]=!0}function kr(n){if(n.length>0){let e=(0,ve.default)("<div>"+n+"</div>").get(0),t=(0,ve.default)("head");for(;e.hasChildNodes();)t.append(e.firstChild)}}function Br(n){let e={},t,i=function(a,o,u,l){return _t[u]||e[u]?"":(e[u]=!0,l)};for(;t=n.replace(Dr,i),n.length!==t.length;)n=t;let r=[],s=function(a,o){return r.push(o),""};for(;t=n.replace(Hr,s),n.length!==t.length;)n=t;return{html:n,head:r.join(`
`),singletons:e}}async function te(n,e,t="replace"){t==="replace"&&U(n);let i="",r=[];e===null?i="":typeof e=="string"?i=e:typeof e=="object"&&(i=e.html,r=e.deps||[]),await ot(i,n,r,t);let s=n;if(t==="replace")et(n),_e(n);else{let a=(0,ee.default)(n).parent();if(a.length>0&&(s=a,t==="beforeBegin"||t==="afterEnd")){let o=a.parent();o.length>0&&(s=o)}et(s),_e(s)}}function $i(n,e,t="replace"){t==="replace"&&U(n);let i="",r=[];e===null?i="":typeof e=="string"?i=e:typeof e=="object"&&(i=e.html,r=e.deps||[]),In(i,n,r,t);let s=n;if(t==="replace")et(n),_e(n);else{let a=(0,ee.default)(n).parent();if(a.length>0&&(s=a,t==="beforeBegin"||t==="afterEnd")){let o=a.parent();o.length>0&&(s=o)}et(s),_e(s)}}async function ot(n,e,t,i="replace"){return await ze(t),vn(n,e,i)}function In(n,e,t,i="replace"){return Tn(t),vn(n,e,i)}async function ze(n){if(n)for(let e of n)await Rr(e)}function Tn(n){if(n)for(let e of n)$r(e)}var rt={};function Nt(n,e){rt[n]=e}function Oi(n){if(!n.restyle)return!1;let e=Object.keys(rt),t=e.indexOf(n.name);return t===-1?!1:rt[e[t]]===n.version}function Ai(n){let e=(0,ee.default)("head").first(),t=function(s,a){let o=new XMLHttpRequest;o.open("GET",s),o.onload=function(){let u="shiny_restyle_"+s.split("?restyle")[0].replace(/\W/g,"_"),l=e.find("style#"+u),d=(0,ee.default)("<style>").attr("id",u).html(o.responseText);e.append(d),l.remove(),r(a),de.transitioned()},o.send()},i=function(s){if(!s)return null;for(let a=0;a<document.styleSheets.length;a++){let o=document.styleSheets[a];if(typeof o.href=="string"&&o.href.indexOf(s)>-1)return o}return null},r=function(s){!s||(s.disabled=!0,Le()&&(s.cssText=""),s.ownerNode instanceof Element&&(0,ee.default)(s.ownerNode).remove())};n.map(s=>{let a=(0,ee.default)(s),o=i(a.attr("href")),u=a.attr("href")+"?restyle="+new Date().getTime();Le()?t(u,o):(a.attr("href",u),a.attr("onload",()=>{let l=(0,ee.default)("<div>").css("transition","0.1s all").css("position","absolute").css("top","-1000px").css("left","0");l.one("transitionend",()=>{l.remove(),r(o),de.transitioned()}),(0,ee.default)(document.body).append(l);let d="#"+Math.floor(Math.random()*16777215).toString(16);setTimeout(()=>l.css("color",d),10)}),e.append(s))})}function wn(n){return n.stylesheet.map(e=>{v(e,"rel")||(e.rel="stylesheet"),v(e,"type")||(e.type="text/css");let t=document.createElement("link");return Object.entries(e).forEach(function([i,r]){i==="href"&&(r=encodeURI(r)),t.setAttribute(i,r||"")}),t})}function Vi(n,e){let t=wn(n);t.length!==0&&e.append(t)}function Lr(n,e){n.script.forEach(t=>{let i=document.createElement("script");Object.entries(t).forEach(function([r,s]){r==="src"&&(s=encodeURI(s)),i.setAttribute(r,s||"")}),e.append(i)})}async function Pr(n){let e=[];n.script.forEach(t=>{let i=document.createElement("script");v(t,"async")||(i.async=!1),Object.entries(t).forEach(function([s,a]){s==="src"&&(a=encodeURI(a)),i.setAttribute(s,a||"")});let r=new Promise((s,a)=>{i.onload=o=>{s(null)},i.onerror=o=>{a(o)}});e.push(r),document.head.append(i)}),await Promise.allSettled(e)}function _i(n,e){n.meta.forEach(t=>{let i=document.createElement("meta");for(let[r,s]of Object.entries(t))i.setAttribute(r,s);e.append(i)})}function Ni(n,e){n.attachment.forEach(t=>{let i=(0,ee.default)("<link rel='attachment'>").attr("id",n.name+"-"+t.key+"-attachment").attr("href",encodeURI(t.href));e.append(i)})}function zi(n,e){if(n.head){let t=(0,ee.default)("<head></head>");t.html(n.head),e.append(t.children())}}async function Rr(n){let e=Qi(n);if(Oi(e))return Ai(wn(e)),!0;if(v(rt,e.name))return!1;Nt(e.name,e.version);let t=(0,ee.default)("head").first();return _i(e,t),Vi(e,t),await Pr(e),Ni(e,t),zi(e,t),!0}function $r(n){let e=Qi(n);if(Oi(e))return Ai(wn(e)),!0;if(v(rt,e.name))return!1;Nt(e.name,e.version);let t=(0,ee.default)("head").first();return _i(e,t),Vi(e,t),Lr(e,t),Ni(e,t),zi(e,t),!0}function Qi(n){let e=n.src?.href,t={name:n.name,version:n.version,restyle:n.restyle,meta:[],stylesheet:[],script:[],attachment:[],head:n.head};n.meta&&(Array.isArray(n.meta)?t.meta=n.meta:t.meta=Object.entries(n.meta).map(function([r,s]){return{name:r,content:s}})),t.stylesheet=Ge(n.stylesheet).map(r=>(typeof r=="string"&&(r={href:r}),e&&(r.href=e+"/"+r.href),r)),t.script=Ge(n.script).map(r=>(typeof r=="string"&&(r={src:r}),e&&(r.src=e+"/"+r.src),r));let i=n.attachment;return i||(i=[]),typeof i=="string"&&(i=[i]),Array.isArray(i)?i=i.map((s,a)=>typeof s=="string"?{key:(a+1).toString(),href:s}:s):i=Object.entries(i).map(function([r,s]){return{key:r,href:s}}),t.attachment=i.map(r=>(e&&(r.href=e+"/"+r.href),r)),t}var zt=class extends J{find(e){return(0,Ji.default)(e).find(".shiny-html-output")}onValueError(e,t){U(e),this.renderError(e,t)}async renderValue(e,t){await te(e,t)}};var De=M(E());var ji=M(E());var qi=M(E());function Ui(n,e,t,i,r,s=!0){s=s||!0;let a=(r-i)/(t-e),u=(n-e)*a+i;if(s){let l=Math.max(r,i),d=Math.min(r,i);u>l?u=l:u<d&&(u=d)}return u}function Fi(n,e,t,i,r){return{scale:function(s,a){return r&&(s=Math.log(s)/Math.log(r)),Ui(s,n,e,t,i,a)},scaleInv:function(s,a){let o=Ui(s,t,i,n,e,a);return r&&(o=Math.pow(r,o)),o}}}function Or(n){let e=n,t=e.domain,i=e.range,r=e.log&&e.log.x?e.log.x:null,s=e.log&&e.log.y?e.log.y:null,a=Fi(t.left,t.right,i.left,i.right,r),o=Fi(t.bottom,t.top,i.bottom,i.top,s);function u(d,p){return ue(d,(c,f)=>{let T=f.substring(0,1);return T==="x"?a.scale(c,p):T==="y"?o.scale(c,p):null})}e.scaleDataToImg=u;function l(d,p){return ue(d,(c,f)=>{let T=f.substring(0,1);return T==="x"?a.scaleInv(c,p):T==="y"?o.scaleInv(c,p):null})}return e.scaleImgToData=l,e.clipImg=function(d){let p={x:d.x,y:d.y},c=e.range;return d.x>c.right?p.x=c.right:d.x<c.left&&(p.x=c.left),d.y>c.bottom?p.y=c.bottom:d.y<c.top&&(p.y=c.top),p},e}function xn(n){return n.map(e=>Or(e))}function Ar(n){let e=n[0].getBoundingClientRect();return{x:e.width/n.outerWidth(),y:e.height/n.outerHeight()}}function En(n){let e=n.offset(),t=Ar(n),i={left:parseInt(n.css("border-left-width"))+parseInt(n.css("padding-left")),top:parseInt(n.css("border-top-width"))+parseInt(n.css("padding-top"))};return{x:e.left+t.x*i.left,y:e.top+t.y*i.top}}function Vr(n){let e={x:n.width()/n.outerWidth(),y:n.height()/n.outerHeight()},t=n[0].getBoundingClientRect();return{x:e.x*t.width,y:e.y*t.height}}function Mn(n,e){let t=n.find("img"),i=t[0];if(e.panels.length===0){let o={top:0,left:0,right:i.clientWidth-1,bottom:i.clientHeight-1};e.panels[0]={domain:o,range:o,mapping:{}}}let r=e;r.dims.height=r.dims.height||i.naturalHeight,r.dims.width=r.dims.width||i.naturalWidth,r.panels=xn(e.panels),r.mouseOffsetCss=function(o){let u=En(t);return{x:o.pageX-u.x,y:o.pageY-u.y}};function s(o){let u=r.imgToCssScalingRatio();return ue(o,(d,p)=>{let c=p.substring(0,1);return c==="x"?o[p]/u.x:c==="y"?o[p]/u.y:null})}r.scaleCssToImg=s;function a(o){let u=r.imgToCssScalingRatio();return ue(o,(d,p)=>{let c=p.substring(0,1);return c==="x"?o[p]*u.x:c==="y"?o[p]*u.y:null})}return r.scaleImgToCss=a,r.imgToCssScalingRatio=function(){let o=Vr(t);return{x:o.x/r.dims.width,y:o.y/r.dims.height}},r.cssToImgScalingRatio=function(){let o=r.imgToCssScalingRatio();return{x:1/o.x,y:1/o.y}},r.getPanelCss=function(o,u=0){let l=r.scaleCssToImg(o),d=l.x,p=l.y,c=r.cssToImgScalingRatio(),f={x:u*c.x,y:u*c.y},T=[],C=[],S,L;for(L=0;L<r.panels.length;L++)if(S=r.panels[L].range,d<=S.right+f.x&&d>=S.left-f.x&&p<=S.bottom+f.y&&p>=S.top-f.y){T.push(r.panels[L]);let V=0,B=0;d>S.right&&d<=S.right+f.x?V=d-S.right:d<S.left&&d>=S.left-f.x&&(V=d-S.left),p>S.bottom&&p<=S.bottom+f.y?B=p-S.bottom:p<S.top&&p>=S.top-f.y&&(B=p-S.top),C.push(Math.sqrt(Math.pow(V,2)+Math.pow(B,2)))}if(T.length){let V=Math.min.apply(null,C);for(L=0;L<T.length;L++)if(C[L]===V)return T[L]}return null},r.isInPanelCss=function(o,u=0){return!!r.getPanelCss(o,u)},r.mouseCoordinateSender=function(o,u=!0,l=!1){return function(d){if(d===null){me(o,null);return}let p=r.mouseOffsetCss(d);if(!r.isInPanelCss(p)){if(l){me(o,null);return}if(u)return;let S={coords_css:p,coords_img:r.scaleCssToImg(p)};me(o,S,{priority:"event"});return}let c=r.getPanelCss(p),f=r.scaleCssToImg(p),T=c.scaleImgToData(f),C={x:T?.x,y:T?.y,coords_css:p,coords_img:f,img_css_ratio:r.cssToImgScalingRatio()};qi.default.extend(C,c.panel_vars),C.mapping=c.mapping,C.domain=c.domain,C.range=c.range,C.log=c.log,me(o,C,{priority:"event"})}},r}function je(n,e){return{xmin:Math.min(n.x,e.x),xmax:Math.max(n.x,e.x),ymin:Math.min(n.y,e.y),ymax:Math.max(n.y,e.y)}}function Me(n,e,t){n instanceof Array||(n=[n]);let i=Math.max.apply(null,n),r=Math.min.apply(null,n),s=0;i>t?s=t-i:r<e&&(s=e-r);let a=[];for(let o=0;o<n.length;o++)a[o]=n[o]+s;return a}function Sn(n,e,t,i){let s=n[0],a=null,o={},u=t.scaleCssToImg,l=t.scaleImgToCss;d();function d(){o.brushing=!1,o.dragging=!1,o.resizing=!1,o.down={x:NaN,y:NaN},o.up={x:NaN,y:NaN},o.resizeSides={left:!1,right:!1,top:!1,bottom:!1},o.boundsCss={xmin:NaN,xmax:NaN,ymin:NaN,ymax:NaN},o.boundsData={xmin:NaN,xmax:NaN,ymin:NaN,ymax:NaN},o.panel=null,o.changeStartBounds={xmin:NaN,xmax:NaN,ymin:NaN,ymax:NaN},a&&a.remove()}function p(){return n.find("#"+s.id+"_brush").length>0}function c(){let h=n.find("#"+s.id+"_brush");if(h.length===0)return;let I=h.data("bounds-data"),k=h.data("panel");if(!(!I||!k)){for(let D=0;D<t.panels.length;D++){let ne=t.panels[D];if(dn(k.mapping,ne.mapping)&&dn(k.panel_vars,ne.panel_vars)){o.panel=t.panels[D];break}}if(o.panel===null){h.remove();return}a=h,V(I),x()}}function f(){let h=V();Object.values(h).some(oi)||(V(h),x())}function T(h){let I=o.boundsCss;return h.x<=I.xmax&&h.x>=I.xmin&&h.y<=I.ymax&&h.y>=I.ymin}function C(h){let I=S(h);return I.left||I.right||I.top||I.bottom}function S(h){let I=o.boundsCss,k={xmin:I.xmin-10,xmax:I.xmax+10,ymin:I.ymin-10,ymax:I.ymax+10},D={left:!1,right:!1,top:!1,bottom:!1};return(e.brushDirection==="xy"||e.brushDirection==="x")&&h.y<=k.ymax&&h.y>=k.ymin&&(h.x<I.xmin&&h.x>=k.xmin?D.left=!0:h.x>I.xmax&&h.x<=k.xmax&&(D.right=!0)),(e.brushDirection==="xy"||e.brushDirection==="y")&&h.x<=k.xmax&&h.x>=k.xmin&&(h.y<I.ymin&&h.y>=k.ymin?D.top=!0:h.y>I.ymax&&h.y<=k.ymax&&(D.bottom=!0)),D}function L(h){if(h===void 0)return{...o.boundsCss};let I={x:h.xmin,y:h.ymin},k={x:h.xmax,y:h.ymax},D=o.panel,ne=D.range;e.brushClip&&(I=l(D.clipImg(u(I))),k=l(D.clipImg(u(k)))),e.brushDirection==="xy"||(e.brushDirection==="x"?(I.y=l({y:ne.top}).y,k.y=l({y:ne.bottom}).y):e.brushDirection==="y"&&(I.x=l({x:ne.left}).x,k.x=l({x:ne.right}).x)),o.boundsCss={xmin:I.x,xmax:k.x,ymin:I.y,ymax:k.y};let Be=D.scaleImgToData(u(I)),G=D.scaleImgToData(u(k));o.boundsData=je(Be,G),o.boundsData=ue(o.boundsData,Ue=>un(Ue,14)),a.data("bounds-data",o.boundsData),a.data("panel",o.panel)}function V(h){if(typeof h>"u")return{...o.boundsData};let I=l(o.panel.scaleDataToImg(h));I=ue(I,k=>un(k,13)),L({xmin:Math.min(I.xmin,I.xmax),xmax:Math.max(I.xmin,I.xmax),ymin:Math.min(I.ymin,I.ymax),ymax:Math.max(I.ymin,I.ymax)})}function B(){return o.panel}function y(){a&&a.remove(),a=(0,ji.default)(document.createElement("div")).attr("id",s.id+"_brush").css({"background-color":e.brushFill,opacity:e.brushOpacity,"pointer-events":"none",position:"absolute"}).hide();let h="1px solid "+e.brushStroke;e.brushDirection==="xy"?a.css({border:h}):e.brushDirection==="x"?a.css({"border-left":h,"border-right":h}):e.brushDirection==="y"&&a.css({"border-top":h,"border-bottom":h}),n.append(a),a.offset({x:0,y:0}).width(0).outerHeight(0)}function x(){let h=En(n.find("img")),I=o.boundsCss;a.offset({top:h.y+I.ymin,left:h.x+I.xmin}).outerWidth(I.xmax-I.xmin+1).outerHeight(I.ymax-I.ymin+1)}function _(h){if(h===void 0)return o.down;o.down=h}function Je(h){if(h===void 0)return o.up;o.up=h}function ke(){return o.brushing}function gt(){o.brushing=!0,y(),o.panel=t.getPanelCss(o.down,i),L(je(o.down,o.down)),x()}function tn(h){L(je(o.down,h)),a.show(),x()}function nn(){o.brushing=!1,L(je(o.down,o.up))}function rn(){return o.dragging}function m(){o.dragging=!0,o.changeStartBounds={...o.boundsCss}}function g(h){let I=h.x-o.down.x,k=h.y-o.down.y,D=o.changeStartBounds,ne={xmin:D.xmin+I,xmax:D.xmax+I,ymin:D.ymin+k,ymax:D.ymax+k};if(e.brushClip){let G=o.panel.range,Ue=u(ne),ht=[Ue.xmin,Ue.xmax],yt=[Ue.ymin,Ue.ymax];ht=Me(ht,G.left,G.right),yt=Me(yt,G.top,G.bottom),ne=l({xmin:ht[0],xmax:ht[1],ymin:yt[0],ymax:yt[1]})}L(ne),x()}function R(){o.dragging=!1}function z(){return o.resizing}function Y(){o.resizing=!0,o.changeStartBounds={...o.boundsCss},o.resizeSides=S(o.down)}function se(h){let I={x:h.x-o.down.x,y:h.y-o.down.y},k=u(I),D=u(o.changeStartBounds),Be=o.panel.range;if(o.resizeSides.left){let G=Me(D.xmin+k.x,Be.left,D.xmax)[0];D.xmin=G}else if(o.resizeSides.right){let G=Me(D.xmax+k.x,D.xmin,Be.right)[0];D.xmax=G}if(o.resizeSides.top){let G=Me(D.ymin+k.y,Be.top,D.ymax)[0];D.ymin=G}else if(o.resizeSides.bottom){let G=Me(D.ymax+k.y,D.ymin,Be.bottom)[0];D.ymax=G}L(l(D)),x()}function pe(){o.resizing=!1}return{reset:d,hasOldBrush:p,importOldBrush:c,isInsideBrush:T,isInResizeArea:C,whichResizeSides:S,onResize:f,boundsCss:L,boundsData:V,getPanel:B,down:_,up:Je,isBrushing:ke,startBrushing:gt,brushTo:tn,stopBrushing:nn,isDragging:rn,startDragging:m,dragTo:g,stopDragging:R,isResizing:z,startResizing:Y,resizeTo:se,stopResizing:pe}}var Xi=M(E());function Dn(n,e,t){let i,r=null;function s(d,p){let c=Xi.default.Event(d,{which:p.which,pageX:p.pageX,pageY:p.pageY});n.trigger(c)}function a(){r&&(s("mousedown2",r),r=null)}function o(d){r=d,i=window.setTimeout(function(){a()},t)}function u(d){if(d.which===1){if(!e){s("mousedown2",d);return}r===null?o(d):(clearTimeout(i),r&&Math.abs(r.pageX-d.pageX)>2||Math.abs(r.pageY-d.pageY)>2?(a(),o(d)):(r=null,s("dblclick2",d)))}}function l(d){d.which=1,s("dblclick2",d)}return{mousedown:u,dblclickIE8:l}}var Se=M(E());function Qt(n,e,t){let i=t.mouseCoordinateSender(n,e);return i(null),{mousedown:function(r){r.which===1&&i(r)},onResetImg:function(){i(null)},onResize:null}}function Hn(n,e,t,i,r,s){let a=s.mouseCoordinateSender(n,i,r),o;t==="throttle"?o=new Ee(null,a,e):o=new Z(null,a,e),o.immediateCall(null);let u;return r?u=function(){o.normalCall(null)}:u=function(){},{mousemove:function(l){o.normalCall(l)},mouseout:u,onResetImg:function(){o.immediateCall(null)},onResize:null}}function Cn(n,e,t,i,r){let a=Sn(e,t,i,20);e.on("shiny-internal:brushed.image_output",function(y,x){x.brushId===n&&x.outputId!==r&&(e.data("mostRecentBrush",!1),a.reset())});function o(y){e.removeClass("crosshair grabbable grabbing ns-resize ew-resize nesw-resize nwse-resize"),y&&e.addClass(y)}function u(){let y=a.boundsData();if(isNaN(y.xmin)){me(n,null),Qe.find(document.documentElement).trigger("shiny-internal:brushed",{brushId:n,outputId:null});return}let x=a.getPanel();Se.default.extend(y,x.panel_vars),y.coords_css=a.boundsCss(),y.coords_img=i.scaleCssToImg(y.coords_css),y.img_css_ratio=i.cssToImgScalingRatio(),y.mapping=x.mapping,y.domain=x.domain,y.range=x.range,y.log=x.log,y.direction=t.brushDirection,y.brushId=n,y.outputId=r,me(n,y),e.data("mostRecentBrush",!0),Qe.find(document.documentElement).trigger("shiny-internal:brushed",y)}let l;t.brushDelayType==="throttle"?l=new Ee(null,u,t.brushDelay):l=new Z(null,u,t.brushDelay),a.hasOldBrush()||l.immediateCall();function d(y){if(a.isBrushing()||a.isDragging()||a.isResizing()||y.which!==1)return;let x=i.mouseOffsetCss(y);if(!(t.brushClip&&!i.isInPanelCss(x,20)))if(a.up({x:NaN,y:NaN}),a.down(x),a.isInResizeArea(x))a.startResizing(x),(0,Se.default)(document).on("mousemove.image_brush",T).on("mouseup.image_brush",L);else if(a.isInsideBrush(x))a.startDragging(x),o("grabbing"),(0,Se.default)(document).on("mousemove.image_brush",f).on("mouseup.image_brush",S);else{let _=i.getPanelCss(x,20);a.startBrushing(_.clipImg(i.scaleCssToImg(x))),(0,Se.default)(document).on("mousemove.image_brush",c).on("mouseup.image_brush",C)}}function p(y){let x=i.mouseOffsetCss(y);if(!(a.isBrushing()||a.isDragging()||a.isResizing()))if(a.isInResizeArea(x)){let _=a.whichResizeSides(x);_.left&&_.top||_.right&&_.bottom?o("nwse-resize"):_.left&&_.bottom||_.right&&_.top?o("nesw-resize"):_.left||_.right?o("ew-resize"):(_.top||_.bottom)&&o("ns-resize")}else a.isInsideBrush(x)?o("grabbable"):i.isInPanelCss(x,20)?o("crosshair"):o(null)}function c(y){a.brushTo(i.mouseOffsetCss(y)),l.normalCall()}function f(y){a.dragTo(i.mouseOffsetCss(y)),l.normalCall()}function T(y){a.resizeTo(i.mouseOffsetCss(y)),l.normalCall()}function C(y){if(y.which===1){if((0,Se.default)(document).off("mousemove.image_brush").off("mouseup.image_brush"),a.up(i.mouseOffsetCss(y)),a.stopBrushing(),o("crosshair"),a.down().x===a.up().x&&a.down().y===a.up().y){a.reset(),l.immediateCall();return}l.isPending()&&l.immediateCall()}}function S(y){y.which===1&&((0,Se.default)(document).off("mousemove.image_brush").off("mouseup.image_brush"),a.up(i.mouseOffsetCss(y)),a.stopDragging(),o("grabbable"),l.isPending()&&l.immediateCall())}function L(y){y.which===1&&((0,Se.default)(document).off("mousemove.image_brush").off("mouseup.image_brush"),a.up(i.mouseOffsetCss(y)),a.stopResizing(),l.isPending()&&l.immediateCall())}function V(){t.brushResetOnNew&&e.data("mostRecentBrush")&&(a.reset(),l.immediateCall())}t.brushResetOnNew||e.data("mostRecentBrush")&&(a.importOldBrush(),l.immediateCall());function B(){a.onResize(),l.immediateCall()}return{mousedown:d,mousemove:p,onResetImg:V,onResize:B}}function Xe(n,e){e.css("-webkit-user-drag","none"),e.off("dragstart.image_output"),e.on("dragstart.image_output",function(){return!1}),n.off("selectstart.image_output"),n.on("selectstart.image_output",function(){return!1})}var kn=class extends J{find(e){return(0,De.default)(e).find(".shiny-image-output, .shiny-plot-output")}renderValue(e,t){let i=this.getId(e),r=(0,De.default)(e),s,a=r.find("img");if(a.length===0?(s=document.createElement("img"),r.append(s),a=(0,De.default)(s)):(s=a[0],a.trigger("reset")),!t){r.empty();return}let o={clickId:r.data("click-id"),clickClip:F(Pe(r.data("click-clip")),!0),dblclickId:r.data("dblclick-id"),dblclickClip:F(Pe(r.data("dblclick-clip")),!0),dblclickDelay:F(r.data("dblclick-delay"),400),hoverId:r.data("hover-id"),hoverClip:F(Pe(r.data("hover-clip")),!0),hoverDelayType:F(r.data("hover-delay-type"),"debounce"),hoverDelay:F(r.data("hover-delay"),300),hoverNullOutside:F(Pe(r.data("hover-null-outside")),!1),brushId:r.data("brush-id"),brushClip:F(Pe(r.data("brush-clip")),!0),brushDelayType:F(r.data("brush-delay-type"),"debounce"),brushDelay:F(r.data("brush-delay"),300),brushFill:F(r.data("brush-fill"),"#666"),brushStroke:F(r.data("brush-stroke"),"#000"),brushOpacity:F(r.data("brush-opacity"),.3),brushDirection:F(r.data("brush-direction"),"xy"),brushResetOnNew:F(Pe(r.data("brush-reset-on-new")),!1),coordmap:t.coordmap};o.brushFill==="auto"&&(o.brushFill=Ye(r[0])),o.brushStroke==="auto"&&(o.brushStroke=ce(r[0],"color")),De.default.each(t,function(u,l){l===null||u==="coordmap"||(u==="src"&&l===s.getAttribute("src")&&s.removeAttribute("src"),s.setAttribute(u,l))});for(let u=0;u<s.attributes.length;u++){let l=s.attributes[u];l.specified&&!ie(t,l.name)&&s.removeAttribute(l.name)}o.coordmap||(o.coordmap={panels:[],dims:{height:null,width:null}}),r.off(".image_output"),a.off(".image_output"),a.off("load.shiny_image_interaction"),a.one("load.shiny_image_interaction",function(){let u=o.coordmap=Mn(r,o.coordmap),l=Dn(r,o.dblclickId,o.dblclickDelay);if(r.on("mousedown.image_output",l.mousedown),Le()&&Wn()===8&&r.on("dblclick.image_output",l.dblclickIE8),o.clickId){Xe(r,a);let d=Qt(o.clickId,o.clickClip,u);r.on("mousedown2.image_output",d.mousedown),r.on("resize.image_output",d.onResize),a.on("reset.image_output",d.onResetImg)}if(o.dblclickId){Xe(r,a);let d=Qt(o.dblclickId,o.clickClip,u);r.on("dblclick2.image_output",d.mousedown),r.on("resize.image_output",d.onResize),a.on("reset.image_output",d.onResetImg)}if(o.hoverId){Xe(r,a);let d=Hn(o.hoverId,o.hoverDelay,o.hoverDelayType,o.hoverClip,o.hoverNullOutside,u);r.on("mousemove.image_output",d.mousemove),r.on("mouseout.image_output",d.mouseout),r.on("resize.image_output",d.onResize),a.on("reset.image_output",d.onResetImg)}if(o.brushId){Xe(r,a);let d=Cn(o.brushId,r,o,u,i);r.on("mousedown.image_output",d.mousedown),r.on("mousemove.image_output",d.mousemove),r.on("resize.image_output",d.onResize),a.on("reset.image_output",d.onResetImg)}(o.clickId||o.dblclickId||o.hoverId||o.brushId)&&r.addClass("crosshair"),t.error&&console.log("Error on server extracting coordmap: "+t.error)})}renderError(e,t){(0,De.default)(e).find("img").trigger("reset"),J.prototype.renderError.call(this,e,t)}clearError(e){(0,De.default)(e).contents().filter(function(){return!(this instanceof HTMLElement&&(this.tagName==="IMG"||this.id===e.id+"_brush"))}).remove(),J.prototype.clearError.call(this,e)}resize(e,t,i){(0,De.default)(e).find("img").trigger("resize")}},Qe=new kn;function Wi(){let n=new Fe;return n.register(new Ot,"shiny.textOutput"),n.register(new At,"shiny.downloadLink"),n.register(new Vt,"shiny.datatableOutput"),n.register(new zt,"shiny.htmlOutput"),n.register(Qe,"shiny.imageOutput"),{outputBindings:n}}function Jt(n){me(n,null),Qe.find(document.documentElement).trigger("shiny-internal:brushed",{brushId:n,outputId:null})}var st=M(E());var _r=250;async function Ie({html:n="",action:e="",deps:t=[],duration:i=5e3,id:r=null,closeButton:s=!0,type:a=null}={}){r||(r=vt()),await ze(t),zr();let o=at(r);o?.length===0&&(o=Qr(r));let u=o,l=`<div class="shiny-notification-content-text">${n}</div><div class="shiny-notification-content-action">${e}</div>`,d=u.find(".shiny-notification-content");await te(d,{html:l});let p=u?.attr("class");if(p){let f=p.split(/\s+/).filter(T=>T.match(/^shiny-notification-/)).join(" ");u.removeClass(f)}a&&a!=="default"&&u.addClass("shiny-notification-"+a);let c=u.find(".shiny-notification-close");return s&&c.length===0?u.append('<div class="shiny-notification-close">&times;</div>'):!s&&c.length!==0&&c.remove(),i?Jr(r,i):Gi(r),r}function Te(n){at(n)?.fadeOut(_r,function(){U(this),(0,st.default)(this).remove(),Nr().length===0&&ut().remove()})}function at(n){return n?ut().find("#shiny-notification-"+w(n)):null}function Nr(){return ut().find(".shiny-notification").map(function(){return this.id.replace(/shiny-notification-/,"")}).get()}function ut(){return(0,st.default)("#shiny-notification-panel")}function zr(){let n=ut();return n.length>0||(0,st.default)(document.body).append('<div id="shiny-notification-panel">'),n}function Qr(n){let e=at(n);return e?.length===0&&(e=(0,st.default)(`<div id="shiny-notification-${n}" class="shiny-notification"><div class="shiny-notification-close">&times;</div><div class="shiny-notification-content"></div></div>`),e.find(".shiny-notification-close").on("click",t=>{t.preventDefault(),t.stopPropagation(),Te(n)}),ut().append(e)),e}function Jr(n,e){Gi(n);let t=setTimeout(function(){Te(n)},e);at(n)?.data("removalCallback",t)}function Gi(n){let t=at(n)?.data("removalCallback");t&&clearTimeout(t)}var He=M(E());async function Ut({html:n="",deps:e=[]}={}){await ze(e),(0,He.default)(".modal-backdrop").remove();let t=(0,He.default)("#shiny-modal-wrapper");t.length===0&&(t=(0,He.default)('<div id="shiny-modal-wrapper"></div>'),(0,He.default)(document.body).append(t),t.on("hidden.bs.modal",function(i){i.target===(0,He.default)("#shiny-modal")[0]&&(U(t),t.remove())})),t.on("keydown.shinymodal",function(i){(0,He.default)("#shiny-modal").data("keyboard")!==!1&&i.keyCode===27&&(i.stopPropagation(),i.preventDefault())}),await te(t,{html:n})}function Ft(){let n=(0,He.default)("#shiny-modal-wrapper");n.off("keydown.shinymodal"),n.find(".modal").length>0?n.find(".modal").modal("hide"):(U(n),n.remove())}var Bn=M(E());function Yi(n){let e=(0,Bn.default)("#shiny-reconnect-time");if(e.length===0)return;let t=Math.floor((n-new Date().getTime())/1e3);t>0?e.text(" in "+t+"s"):e.text("..."),setTimeout(function(){Yi(n)},1e3)}function qt(n){let e=new Date().getTime()+n;if((0,Bn.default)("#shiny-reconnect-text").length>0)return;Ie({id:"reconnect",html:'<span id="shiny-reconnect-text">Attempting to reconnect</span><span id="shiny-reconnect-time"></span>',action:'<a id="shiny-reconnect-now" href="#" onclick="Shiny.shinyapp.reconnect();">Try now</a>',duration:null,closeButton:!1,type:"warning"}),Yi(e)}function jt(){Te("reconnect")}var H=M(E());var lt=class{constructor(e){this.pendingData={};this.reentrant=!1;this.sendIsEnqueued=!1;this.lastChanceCallback=[];this.shinyapp=e}setInput(e,t,i){this.pendingData[e]=t,this.reentrant||(i.priority==="event"?this._sendNow():this.sendIsEnqueued||this.shinyapp.taskQueue.enqueue(()=>{this.sendIsEnqueued=!1,this._sendNow()}))}_sendNow(){this.reentrant&&console.trace("Unexpected reentrancy in InputBatchSender!"),this.reentrant=!0;try{this.lastChanceCallback.forEach(t=>t());let e=this.pendingData;this.pendingData={},this.shinyapp.sendInput(e)}finally{this.reentrant=!1}}};function Ce(n){let e=n.split(":");return{name:e[0],inputType:e.length>1?e[1]:""}}var dt=class{constructor(e,t={}){this.lastSentValues={};this.target=e,this.reset(t)}setInput(e,t,i){let{name:r,inputType:s}=Ce(e),a=JSON.stringify(t);i.priority!=="event"&&this.lastSentValues[r]&&this.lastSentValues[r].jsonValue===a&&this.lastSentValues[r].inputType===s||(this.lastSentValues[r]={jsonValue:a,inputType:s},this.target.setInput(e,t,i))}reset(e={}){let t={};for(let i in e)if(v(e,i)){let{name:r,inputType:s}=Ce(i);t[r]={jsonValue:JSON.stringify(e[i]),inputType:s}}this.lastSentValues=t}forget(e){delete this.lastSentValues[e]}};var Ln=M(E());var pt=class{constructor(e){this.target=e}setInput(e,t,i){let r=Ln.default.Event("shiny:inputchanged"),s=Ce(e);if(r.name=s.name,r.inputType=s.inputType,r.value=t,r.binding=i.binding||null,r.el=i.el||null,r.priority=i.priority,(0,Ln.default)(i.el||window.document).trigger(r),!r.isDefaultPrevented()){let a=r.name;r.inputType!==""&&(a+=":"+r.inputType),this.target.setInput(a,r.value,{priority:i.priority})}}};var ct=class{constructor(e){this.inputRatePolicies={};this.target=e}setInput(e,t,i){let{name:r}=Ce(e);this._ensureInit(r),i.priority!=="deferred"?this.inputRatePolicies[r].immediateCall(e,t,i):this.inputRatePolicies[r].normalCall(e,t,i)}setRatePolicy(e,t,i){let{name:r}=Ce(e);t==="direct"?this.inputRatePolicies[r]=new it(this,this._doSetInput):t==="debounce"?this.inputRatePolicies[r]=new Z(this,this._doSetInput,i):t==="throttle"&&(this.inputRatePolicies[r]=new Ee(this,this._doSetInput,i))}_ensureInit(e){e in this.inputRatePolicies||this.setRatePolicy(e,"direct")}_doSetInput(e,t,i){this.target.setInput(e,t,i)}};var mt=class{constructor(e){this.pendingInput={};this.target=e}setInput(e,t,i){/^\./.test(e)?this.target.setInput(e,t,i):this.pendingInput[e]={value:t,opts:i}}submit(){for(let e in this.pendingInput)if(v(this.pendingInput,e)){let{value:t,opts:i}=this.pendingInput[e];this.target.setInput(e,t,i)}}};function Pn(n){let e={priority:"immediate",...n};switch(e.priority){case"deferred":case"immediate":case"event":break;default:throw new Error("Unexpected input value mode: '"+e.priority+"'")}return e}var ft=class{constructor(e){this.target=e}setInput(e,t,i={}){if(!e)throw"Can't set input with empty name.";let r=Pn(i);this.target.setInput(e,t,r)}};var X=M(E());var Xt=class{constructor(e,t){this.el=e,this.binding=t,t.resize&&(this.onResize=ni(e,function(i,r){t.resize(e,i,r)}))}getId(){return this.binding.getId(this.el)}async onValueChange(e){await this.binding.onValueChange(this.el,e)}onValueError(e){this.binding.onValueError(this.el,e)}showProgress(e){this.binding.showProgress(this.el,e)}onResize(){}};var Rn={};function Ur(n,e,t,i){let r=e.getId(t);if(r){let s=e.getValue(t),a=e.getType(t);a&&(r=r+":"+a);let o={priority:i?"deferred":"immediate",binding:e,el:t};n.setInput(r,s,o)}}function Fr(n,e=document.documentElement){let{inputs:t,inputsRate:i,inputBindings:r}=n,s=r.getBindings(),a={};for(let o=0;o<s.length;o++){let u=s[o].binding,l=u.find(e)||[];for(let d=0;d<l.length;d++){let p=l[d];if(p.hasAttribute("data-shiny-no-bind-input"))continue;let c=u.getId(p);if(!c||Rn[c])continue;let f=u.getType(p),T=f?c+":"+f:c;a[T]={value:u.getValue(p),opts:{immediate:!0,binding:u,el:p}};let C=function(){let L=u,V=p;return function(B){Ur(t,L,V,B)}}();u.subscribe(p,C),(0,X.default)(p).data("shiny-input-binding",u),(0,X.default)(p).addClass("shiny-bound-input");let S=u.getRatePolicy(p);S!==null&&i.setRatePolicy(T,S.policy,S.delay),Rn[c]={binding:u,node:p},(0,X.default)(p).trigger({type:"shiny:bound",binding:u,bindingType:"input"})}}return a}function qr({sendOutputHiddenState:n,maybeAddThemeObserver:e,outputBindings:t},i=document.documentElement){let r=(0,X.default)(i),s=t.getBindings();for(let a=0;a<s.length;a++){let o=s[a].binding,u=o.find(r)||[];for(let l=0;l<u.length;l++){let d=u[l],p=o.getId(d);if(!p||!X.default.contains(document.documentElement,d))continue;let c=(0,X.default)(d);if(c.hasClass("shiny-bound-output"))continue;e(d);let f=new Xt(d,o);bi(p,f),c.data("shiny-output-binding",f),c.addClass("shiny-bound-output"),c.attr("aria-live")||c.attr("aria-live","polite"),c.trigger({type:"shiny:bound",binding:o,bindingType:"output"})}}setTimeout(de.regular,0),setTimeout(n,0)}function jr(n=document.documentElement,e=!1){let t=(0,X.default)(n).find(".shiny-bound-input").toArray();e&&(0,X.default)(n).hasClass("shiny-bound-input")&&t.push(n);for(let i=0;i<t.length;i++){let r=t[i],s=(0,X.default)(r).data("shiny-input-binding");if(!s)continue;let a=s.getId(r);(0,X.default)(r).removeClass("shiny-bound-input"),delete Rn[a],s.unsubscribe(r),(0,X.default)(r).trigger({type:"shiny:unbound",binding:s,bindingType:"input"})}}function Xr({sendOutputHiddenState:n},e=document.documentElement,t=!1){let i=(0,X.default)(e).find(".shiny-bound-output").toArray();t&&(0,X.default)(e).hasClass("shiny-bound-output")&&i.push(e);for(let r=0;r<i.length;r++){let s=(0,X.default)(i[r]),a=s.data("shiny-output-binding");if(!a)continue;let o=a.binding.getId(i[r]);vi(o,a),s.removeClass("shiny-bound-output"),s.removeData("shiny-output-binding"),s.trigger({type:"shiny:unbound",binding:a.binding,bindingType:"output"})}setTimeout(de.regular,0),setTimeout(n,0)}function $n(n,e){return qr(n,e),Fr(n,e)}function Ki(n,e,t=!1){jr(e,t),Xr(n,e,t)}function Zi(n,e){let t=$n(n,e),i=n.inputs;X.default.each(t,function(r,s){i.setInput(r,s.value,s.opts)}),n.initDeferredIframes()}var b=M(E());var Wt=class{constructor(){this.$promises=[];this.$resolvers=[]}_add(){let e=new Promise(t=>{this.$resolvers.push(t)});this.$promises.push(e)}enqueue(e){this.$resolvers.length||this._add(),this.$resolvers.shift()(e)}async dequeue(){return this.$promises.length||this._add(),this.$promises.shift()}isEmpty(){return!this.$promises.length}isBlocked(){return!!this.$resolvers.length}get length(){return this.$promises.length-this.$resolvers.length}};var er=[],On={},Gt=[],Yt={};function O(n,e){if(On[n])throw'handler for message of type "'+n+'" already added.';if(typeof e!="function")throw"handler must be a function.";if(e.length!==1)throw"handler must be a function that takes one argument.";er.push(n),On[n]=e}function tr(n,e){if(Yt[n]){let t=Gt.indexOf(n);t!==-1&&(Gt.splice(t,1),delete Yt[n])}if(typeof e!="function")throw"handler must be a function.";if(e.length!==1)throw"handler must be a function that takes one argument.";Gt.push(n),Yt[n]=e}var Kt=class{constructor(){this.$socket=null;this.taskQueue=new Wt;this.config=null;this.$inputValues={};this.$initialInput=null;this.$bindings={};this.$values={};this.$errors={};this.$conditionals={};this.$pendingMessages=[];this.$activeRequests={};this.$nextRequestId=0;this.$allowReconnect=!1;this.scheduledReconnect=void 0;this.reconnectDelay=function(){let e=0,t=[1500,1500,2500,2500,5500,5500,10500];return{next:function(){let i=e;return i>=t.length&&(i=t.length-1),e++,t[i]},reset:function(){e=0}}}();this.progressHandlers={binding:function(e){let t=e.id,i=this.$bindings[t];i&&((0,b.default)(i.el).trigger({type:"shiny:outputinvalidated",binding:i,name:t}),i.showProgress&&i.showProgress(!0))},open:async function(e){if(e.style==="notification")await Ie({html:`<div id="shiny-progress-${e.id}" class="shiny-progress-notification"><div class="progress active" style="display: none;"><div class="progress-bar"></div></div><div class="progress-text"><span class="progress-message">message</span> <span class="progress-detail"></span></div></div>`,id:e.id,duration:null});else if(e.style==="old"){let t=(0,b.default)(".shiny-progress-container");t.length===0&&(t=(0,b.default)('<div class="shiny-progress-container"></div>'),(0,b.default)(document.body).append(t));let i=(0,b.default)(".shiny-progress.open").length,r=(0,b.default)('<div class="shiny-progress open"><div class="progress active"><div class="progress-bar bar"></div></div><div class="progress-text"><span class="progress-message">message</span><span class="progress-detail"></span></div></div>');r.attr("id",e.id),t.append(r);let s=r.find(".progress");if(s){s.css("top",i*s.height()+"px");let a=r.find(".progress-text");a.css("top",3*s.height()+i*a.outerHeight()+"px"),r.hide()}}},update:function(e){if(e.style==="notification"){let t=(0,b.default)("#shiny-progress-"+e.id);if(t.length===0)return;typeof e.message<"u"&&t.find(".progress-message").text(e.message),typeof e.detail<"u"&&t.find(".progress-detail").text(e.detail),typeof e.value<"u"&&e.value!==null&&(t.find(".progress").show(),t.find(".progress-bar").width(e.value*100+"%"))}else if(e.style==="old"){let t=(0,b.default)("#"+e.id+".shiny-progress");typeof e.message<"u"&&t.find(".progress-message").text(e.message),typeof e.detail<"u"&&t.find(".progress-detail").text(e.detail),typeof e.value<"u"&&e.value!==null&&(t.find(".progress").show(),t.find(".bar").width(e.value*100+"%")),t.fadeIn()}},close:function(e){if(e.style==="notification")Te(e.id);else if(e.style==="old"){let t=(0,b.default)("#"+e.id+".shiny-progress");t.removeClass("open"),t.fadeOut({complete:function(){t.remove(),(0,b.default)(".shiny-progress").length===0&&(0,b.default)(".shiny-progress-container").remove()}})}}};this._init()}connect(e){if(this.$socket)throw"Connect was already called on this application object";this.$socket=this.createSocket(),this.$initialInput=e,b.default.extend(this.$inputValues,e),this.$updateConditionals()}isConnected(){return!!this.$socket}reconnect(){if(clearTimeout(this.scheduledReconnect),this.isConnected())throw"Attempted to reconnect, but already connected.";this.$socket=this.createSocket(),this.$initialInput=b.default.extend({},this.$inputValues),this.$updateConditionals()}createSocket(){let t=(Ei()||(()=>{let r="ws:";window.location.protocol==="https:"&&(r="wss:");let s=window.location.pathname;/^([$#!&-;=?-[\]_a-z~]|%[0-9a-fA-F]{2})+$/.test(s)||(s=encodeURI(s),Xn()&&(s=encodeURI(s))),/\/$/.test(s)||(s+="/"),s+="websocket/";let a=new WebSocket(r+"//"+window.location.host+s);return a.binaryType="arraybuffer",a}))(),i=!1;return t.onopen=()=>{for(i=!0,(0,b.default)(document).trigger({type:"shiny:connected",socket:t}),this.onConnected(),t.send(JSON.stringify({method:"init",data:this.$initialInput}));this.$pendingMessages.length;){let r=this.$pendingMessages.shift();t.send(r)}this.startActionQueueLoop()},t.onmessage=r=>{this.taskQueue.enqueue(async()=>await this.dispatchMessage(r.data))},t.onclose=()=>{i&&((0,b.default)(document).trigger({type:"shiny:disconnected",socket:t}),this.$notifyDisconnected()),this.onDisconnected(),this.$removeSocket()},t}async startActionQueueLoop(){for(;;){let e=await this.taskQueue.dequeue();try{await e()}catch(t){console.error(t)}}}sendInput(e){let t=JSON.stringify({method:"update",data:e});this.$sendMsg(t),b.default.extend(this.$inputValues,e),this.$updateConditionals()}$notifyDisconnected(){window.parent&&window.parent.postMessage("disconnected","*")}$removeSocket(){this.$socket=null}$scheduleReconnect(e){this.scheduledReconnect=window.setTimeout(()=>{this.reconnect()},e)}onDisconnected(){if((0,b.default)("#shiny-disconnected-overlay").length===0&&(0,b.default)(document.body).append('<div id="shiny-disconnected-overlay"></div>'),this.$allowReconnect===!0&&this.$socket.allowReconnect===!0||this.$allowReconnect==="force"){let t=this.reconnectDelay.next();qt(t),this.$scheduleReconnect(t)}}onConnected(){(0,b.default)("#shiny-disconnected-overlay").remove(),jt(),this.reconnectDelay.reset()}makeRequest(e,t,i,r,s){let a=this.$nextRequestId;for(;this.$activeRequests[a];)a=(a+1)%1e9;this.$nextRequestId=a+1,this.$activeRequests[a]={onSuccess:i,onError:r};let o=JSON.stringify({method:e,args:t,tag:a});if(s){let u=function(c){let f=new ArrayBuffer(4);return new DataView(f).setUint32(0,c,!0),f},l=[];l.push(u(16908802));let d=new Blob([o]);l.push(u(d.size)),l.push(d);for(let c=0;c<s.length;c++){let f=s[c];l.push(u(f.byteLength||f.size||0)),l.push(f)}o=new Blob(l)}this.$sendMsg(o)}$sendMsg(e){this.$socket.readyState?this.$socket.send(e):this.$pendingMessages.push(e)}receiveError(e,t){if(this.$errors[e]===t)return;this.$errors[e]=t,delete this.$values[e];let i=this.$bindings[e],r=b.default.Event("shiny:error");r.name=e,r.error=t,r.binding=i,(0,b.default)(i?i.el:document).trigger(r),!r.isDefaultPrevented()&&i&&i.onValueError&&i.onValueError(r.error)}async receiveOutput(e,t){let i=this.$bindings[e],r=b.default.Event("shiny:value");if(r.name=e,r.value=t,r.binding=i,this.$values[e]===t){(0,b.default)(i?i.el:document).trigger(r);return}return this.$values[e]=t,delete this.$errors[e],(0,b.default)(i?i.el:document).trigger(r),!r.isDefaultPrevented()&&i&&await i.onValueChange(r.value),t}bindOutput(e,t){if(!e)throw"Can't bind an element with no ID";if(this.$bindings[e])throw"Duplicate binding for ID "+e;return this.$bindings[e]=t,this.$values[e]!==void 0?t.onValueChange(this.$values[e]):this.$errors[e]!==void 0&&t.onValueError(this.$errors[e]),t}unbindOutput(e,t){return this.$bindings[e]===t?(delete this.$bindings[e],!0):!1}_narrowScopeComponent(e,t){return Object.keys(e).filter(i=>i.indexOf(t)===0).map(i=>({[i.substring(t.length)]:e[i]})).reduce((i,r)=>b.default.extend(i,r),{})}_narrowScope(e,t){return t?{input:this._narrowScopeComponent(e.input,t),output:this._narrowScopeComponent(e.output,t)}:e}$updateConditionals(){(0,b.default)(document).trigger({type:"shiny:conditional"});let e={};for(let r in this.$inputValues)if(ie(this.$inputValues,r)){let s=r.replace(/:.*/,"");e[s]=this.$inputValues[r]}let t={input:e,output:this.$values},i=(0,b.default)(document).find("[data-display-if]");for(let r=0;r<i.length;r++){let s=(0,b.default)(i[r]),a=s.data("data-display-if-func");if(!a){let p=s.attr("data-display-if");a=ii(p),s.data("data-display-if-func",a)}let o=s.attr("data-ns-prefix"),u=this._narrowScope(t,o),l=a(u),d=s.css("display")!=="none";l!==d&&(l?(s.trigger("show"),s.show(),s.trigger("shown")):(s.trigger("hide"),s.hide(),s.trigger("hidden")))}}async dispatchMessage(e){let t={};if(typeof e=="string")t=JSON.parse(e);else{let r=new DataView(e,0,1).getUint8(0),s=new DataView(e,1,r),a=[];for(let u=0;u<r;u++)a.push(String.fromCharCode(s.getUint8(u)));let o=a.join("");e=e.slice(r+1),t.custom={},t.custom[o]=e}let i=b.default.Event("shiny:message");i.message=t,(0,b.default)(document).trigger(i),!i.isDefaultPrevented()&&(await this._sendMessagesToHandlers(i.message,On,er),this.$updateConditionals())}async _sendMessagesToHandlers(e,t,i){for(let r=0;r<i.length;r++){let s=i[r];ie(e,s)&&await t[s].call(this,e[s])}}_init(){O("values",async o=>{for(let u in this.$bindings)ie(this.$bindings,u)&&this.$bindings[u].showProgress(!1);for(let u in o)ie(o,u)&&await this.receiveOutput(u,o[u])}),O("errors",o=>{for(let u in o)ie(o,u)&&this.receiveError(u,o[u])}),O("inputMessages",o=>{for(let u=0;u<o.length;u++){let l=(0,b.default)(".shiny-bound-input#"+w(o[u].id)),d=l.data("shiny-input-binding");if(l.length>0){l.attr("aria-live")||l.attr("aria-live","polite");let p=l[0],c=b.default.Event("shiny:updateinput");if(c.message=o[u].message,c.binding=d,(0,b.default)(p).trigger(c),!c.isDefaultPrevented())try{d.receiveMessage(p,c.message)}catch(f){console.error("[shiny] Error in inputBinding.receiveMessage()",{error:f,binding:d,message:c.message})}}}}),O("javascript",o=>{Ae(o)}),O("console",o=>{for(let u=0;u<o.length;u++)console.log&&console.log(o[u])}),O("progress",async o=>{if(o.type&&o.message){let u=await this.progressHandlers[o.type];u&&u.call(this,o.message)}}),O("notification",async o=>{if(o.type==="show")await Ie(o.message);else if(o.type==="remove")Te(o.message);else throw"Unkown notification type: "+o.type}),O("modal",async o=>{if(o.type==="show")await Ut(o.message);else if(o.type==="remove")Ft();else throw"Unkown modal type: "+o.type}),O("response",o=>{let u=o.tag,l=this.$activeRequests[u];l&&(delete this.$activeRequests[u],"value"in o?l.onSuccess(o.value):l.onError(o.error))}),O("allowReconnect",o=>{switch(o){case!0:case!1:case"force":this.$allowReconnect=o;break;default:throw"Invalid value for allowReconnect: "+o}}),O("custom",o=>{let u=Ii();u&&u(o),this._sendMessagesToHandlers(o,Yt,Gt)}),O("config",o=>{this.config={workerId:o.workerId,sessionId:o.sessionId},o.user&&hi(o.user),(0,b.default)(document).trigger("shiny:sessioninitialized")}),O("busy",o=>{o==="busy"?((0,b.default)(document.documentElement).addClass("shiny-busy"),(0,b.default)(document).trigger("shiny:busy")):o==="idle"&&((0,b.default)(document.documentElement).removeClass("shiny-busy"),(0,b.default)(document).trigger("shiny:idle"))}),O("recalculating",o=>{if(ie(o,"name")&&ie(o,"status")){let u=this.$bindings[o.name];u?(0,b.default)(u.el).trigger("shiny:"+o.status):(0,b.default)().trigger("shiny:"+o.status)}}),O("reload",o=>{window.location.reload()}),O("shiny-insert-ui",async o=>{let u=(0,b.default)(o.selector);if(u.length===0)console.warn('The selector you chose ("'+o.selector+'") could not be found in the DOM.'),await ot(o.content.html,(0,b.default)([]),o.content.deps);else for(let l of u)if(await te(l,o.content,o.where),o.multiple===!1)break}),O("shiny-remove-ui",o=>{(0,b.default)(o.selector).each(function(l,d){return U(d,!0),(0,b.default)(d).remove(),o.multiple===!1?!1:void 0})}),O("frozen",o=>{for(let u=0;u<o.ids.length;u++)yi(o.ids[u])});function e(o){let u=(0,b.default)("#"+w(o));if(u.length===0)throw"There is no tabsetPanel (or navbarPage or navlistPanel) with id equal to '"+o+"'";return u}function t(o){let u=o.attr("data-tabsetid");return(0,b.default)("div.tab-content[data-tabsetid='"+w(u)+"']")}function i(o,u,l){let d="[data-value='"+w(l)+"']",p=o.find("a"+d),c=p.parent();if(c.length===0)throw"There is no tabPanel (or navbarMenu) with value (or menuName) equal to '"+l+"'";let f=[],T=[];if(p.attr("data-toggle")==="dropdown"){let C=p.find("+ ul.dropdown-menu"),S=C.attr("data-tabsetid");C.find("a[data-toggle='tab']").parent("li").each(function(y,x){f.push((0,b.default)(x))});let V="div.tab-pane[id^='tab-"+w(S)+"']";u.find(V).each(function(y,x){T.push((0,b.default)(x))})}else T.push(u.find("div"+d));return{$liTag:c,$liTags:f,$divTags:T}}O("shiny-insert-tab",async o=>{let u=e(o.inputId),l=u,d=t(l),p=u.attr("data-tabsetid"),c=(0,b.default)(o.divTag.html),f=(0,b.default)(o.liTag.html),T=f.find("> a"),C=null;o.target!==null&&(C=i(l,d,o.target).$liTag);let S=V();if(S!==null){if(T.attr("data-toggle")==="dropdown")throw"Cannot insert a navbarMenu inside another one";l=S.$tabset,p=S.id,f.removeClass("nav-item").find(".nav-link").removeClass("nav-link").addClass("dropdown-item")}if(T.attr("data-toggle")==="tab"){let B=L(l,p),y="tab-"+p+"-"+B;f.find("> a").attr("href","#"+y),c.attr("id",y)}o.position==="before"?C?C.before(f):l.prepend(f):o.position==="after"&&(C?C.after(f):l.append(f)),await te(f[0],{html:f.html(),deps:o.liTag.deps}),await te(d[0],{html:"",deps:o.divTag.deps},"beforeend");for(let B of c.get())d[0].appendChild(B),await te(B,B.innerHTML||B.textContent);o.select&&f.find("a").tab("show");function L(B,y){let x=[0];return B.find("> li").each(function(){let _=(0,b.default)(this).find("> a[data-toggle='tab']");if(_.length>0){let ke=_.attr("href").replace(/.*(?=#[^\s]+$)/,"").replace("#tab-"+y+"-","");x.push(Number(ke))}}),Math.max.apply(null,x)+1}function V(){if(o.menuName!==null){let B=(0,b.default)("a.dropdown-toggle[data-value='"+w(o.menuName)+"']");if(B.length===0)throw"There is no navbarMenu with menuName equal to '"+o.menuName+"'";let y=B.find("+ ul.dropdown-menu"),x=y.attr("data-tabsetid");return{$tabset:y,id:x}}else if(o.target!==null&&C!==null){let B=C.parent("ul");if(B.hasClass("dropdown-menu")){let y=B.attr("data-tabsetid");return{$tabset:B,id:y}}}return null}});function r(o){let u=o.data("shiny-input-binding");if(!u.getValue(o)){let l=s(o),d=b.default.Event("shiny:updateinput");d.binding=u,o.trigger(d),u.setValue(o[0],l)}}function s(o){return o.find("li:visible a[data-toggle='tab']").first().attr("data-value")||null}function a(o,u,l=!1){b.default.each(o,function(d,p){d==="$liTag"?u(p):d==="$divTags"?b.default.each(p,function(c,f){u(f)}):l&&d==="$liTags"&&b.default.each(p,function(c,f){u(f)})})}O("shiny-remove-tab",o=>{let u=e(o.inputId),l=t(u),d=i(u,l,o.target);a(d,p),r(u);function p(c){U(c,!0),c.remove()}}),O("shiny-change-tab-visibility",o=>{let u=e(o.inputId),l=t(u),d=i(u,l,o.target);a(d,p,!0),r(u);function p(c){o.type==="show"?c.css("display",""):o.type==="hide"&&(c.hide(),c.removeClass("active"))}}),O("updateQueryString",o=>{if(o.mode==="replace"){window.history.replaceState(null,null,o.queryString);return}let u=null;if(o.queryString.charAt(0)==="#")u="hash";else if(o.queryString.charAt(0)==="?")u="query";else throw"The 'query' string must start with either '?' (to update the query string) or with '#' (to update the hash).";let l=window.location.pathname,d=window.location.search,p=window.location.hash,c=l;u==="query"?c+=o.queryString:c+=d+o.queryString,window.history.pushState(null,null,c),o.queryString.indexOf("#")!==-1&&(u="hash"),window.location.hash!==p&&(u="hash"),u==="hash"&&(0,b.default)(document).trigger("hashchange")}),O("resetBrush",o=>{Jt(o.brushId)})}getTestSnapshotBaseUrl({fullUrl:e=!0}={}){let t=window.location,i="";return e&&(i=t.origin+t.pathname.replace(/\/[^/]*$/,"")),i+="/session/"+encodeURIComponent(this.config.sessionId)+"/dataobj/shinytest?w="+encodeURIComponent(this.config.workerId)+"&nonce="+vt(),i}};function ir(n){gi(n);let e=n.shinyapp=new Kt;n.progressHandlers=e.progressHandlers;let t=new lt(e),i=new dt(t),r=new pt(i),s=new ct(r),a=new mt(r),o;(0,H.default)('input[type="submit"], button[type="submit"]').length>0?(o=a,(0,H.default)('input[type="submit"], button[type="submit"]').each(function(){(0,H.default)(this).click(function(m){m.preventDefault(),a.submit()})})):o=s;let u=new ft(o);n.setInputValue=n.onInputChange=function(m,g,R={}){let z=Pn(R);u.setInput(m,g,z)},n.forgetLastInputValue=function(m){i.forget(m)};let l=n.inputBindings,d=n.outputBindings;function p(){return{inputs:u,inputsRate:s,sendOutputHiddenState:ke,maybeAddThemeObserver:L,inputBindings:l,outputBindings:d,initDeferredIframes:nr}}n.bindAll=function(m){Zi(p(),m)},n.unbindAll=function(m,g=!1){Ki(p(),m,g)};function c(m=document.documentElement){let g=l.getBindings();for(let R=0;R<g.length;R++){let z=g[R].binding,Y=z.find(m);if(Y)for(let se=0;se<Y.length;se++){let pe=(0,H.default)(Y[se]);pe.data("_shiny_initialized")||(pe.data("_shiny_initialized",!0),z.initialize(Y[se]))}}}n.initializeInputs=c;function f(m){let R=(0,H.default)(m).data("shiny-output-binding");return R?R.getId():null}c(document.documentElement);let T=ue($n(p(),document.documentElement),m=>m.value);(0,H.default)(".shiny-image-output, .shiny-plot-output, .shiny-report-size").each(function(){let m=f(this),g=this.getBoundingClientRect();(g.width!==0||g.height!==0)&&(T[".clientdata_output_"+m+"_width"]=g.width,T[".clientdata_output_"+m+"_height"]=g.height)});function C(m){if(!m)return null;let g=ce(m,"background-color");if(!g)return g;let R=g.match(/^rgba\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)$/);if(g==="transparent"||R&&parseFloat(R[4])===0){let z=ce(m,"background-image");return z&&z!=="none"?null:C(m.parentElement)}return g}function S(m){let g=ce(m,"font-family"),R=ce(m,"font-size");return{families:g?.replace(/"/g,"").split(", "),size:R}}(0,H.default)(".shiny-image-output, .shiny-plot-output, .shiny-report-theme").each(function(){let m=this,g=f(m);T[".clientdata_output_"+g+"_bg"]=C(m),T[".clientdata_output_"+g+"_fg"]=ce(m,"color"),T[".clientdata_output_"+g+"_accent"]=Ye(m),T[".clientdata_output_"+g+"_font"]=S(m),L(m)});function L(m){if(!window.MutationObserver)return;let g=m.classList;if(!(g.contains("shiny-image-output")||g.contains("shiny-plot-output")||g.contains("shiny-report-theme")))return;let z=(0,H.default)(m);if(z.data("shiny-theme-observer"))return;let Y=new Z(null,()=>V(m),100),se=new MutationObserver(()=>Y.normalCall()),pe={attributes:!0,attributeFilter:["style","class"]};se.observe(m,pe),z.data("shiny-theme-observer",se)}function V(m){if(m.classList.contains("shiny-output-error"))return;let g=f(m);u.setInput(".clientdata_output_"+g+"_bg",C(m)),u.setInput(".clientdata_output_"+g+"_fg",ce(m,"color")),u.setInput(".clientdata_output_"+g+"_accent",Ye(m)),u.setInput(".clientdata_output_"+g+"_font",S(m))}function B(){(0,H.default)(".shiny-image-output, .shiny-plot-output, .shiny-report-size").each(function(){let m=f(this),g=this.getBoundingClientRect();(g.width!==0||g.height!==0)&&(u.setInput(".clientdata_output_"+m+"_width",g.width),u.setInput(".clientdata_output_"+m+"_height",g.height))}),(0,H.default)(".shiny-image-output, .shiny-plot-output, .shiny-report-theme").each(function(){V(this)}),(0,H.default)(".shiny-bound-output").each(function(){let m=(0,H.default)(this),g=m.data("shiny-output-binding");m.trigger({type:"shiny:visualchange",visible:!y(this),binding:g}),g.onResize()})}de.setImageSend(t,B);function y(m){return m===null||m.offsetWidth!==0||m.offsetHeight!==0?!1:ce(m,"display")==="none"?!0:y(m.parentNode)}let x={};(0,H.default)(".shiny-bound-output").each(function(){let m=f(this);y(this)?T[".clientdata_output_"+m+"_hidden"]=!0:(x[m]=!0,T[".clientdata_output_"+m+"_hidden"]=!1)});function _(){let m={};(0,H.default)(".shiny-bound-output").each(function(){let g=f(this);delete x[g];let R=y(this),z={type:"shiny:visualchange",visible:!R};R?u.setInput(".clientdata_output_"+g+"_hidden",!0):(m[g]=!0,u.setInput(".clientdata_output_"+g+"_hidden",!1));let Y=(0,H.default)(this);z.binding=Y.data("shiny-output-binding"),Y.trigger(z)});for(let g in x)v(x,g)&&u.setInput(".clientdata_output_"+g+"_hidden",!0);x=m}let Je=new Z(null,_,0);function ke(){Je.normalCall()}t.lastChanceCallback.push(function(){Je.isPending()&&Je.immediateCall()});function gt(m,g,...R){let z=m.split(".");return function(Y){let se=Y.namespace?.split(".")??[];for(let pe=0;pe<z.length;pe++)if(se.indexOf(z[pe])===-1)return;g.apply(this,[z,g,...R])}}(0,H.default)(window).resize(xe(500,de.regular));let tn=["modal","dropdown","tab","tooltip","popover","collapse"];H.default.each(tn,function(m,g){(0,H.default)(document.body).on("shown.bs."+g+".sendImageSize","*",gt("bs",de.regular)),(0,H.default)(document.body).on("shown.bs."+g+".sendOutputHiddenState hidden.bs."+g+".sendOutputHiddenState","*",gt("bs",ke))}),(0,H.default)(document.body).on("shown.sendImageSize","*",de.regular),(0,H.default)(document.body).on("shown.sendOutputHiddenState hidden.sendOutputHiddenState","*",ke),T[".clientdata_pixelratio"]=ln(),(0,H.default)(window).resize(function(){u.setInput(".clientdata_pixelratio",ln())}),T[".clientdata_url_protocol"]=window.location.protocol,T[".clientdata_url_hostname"]=window.location.hostname,T[".clientdata_url_port"]=window.location.port,T[".clientdata_url_pathname"]=window.location.pathname,T[".clientdata_url_search"]=window.location.search,(0,H.default)(window).on("pushstate",function(m){u.setInput(".clientdata_url_search",window.location.search)}),(0,H.default)(window).on("popstate",function(m){u.setInput(".clientdata_url_search",window.location.search)}),T[".clientdata_url_hash_initial"]=window.location.hash,T[".clientdata_url_hash"]=window.location.hash,(0,H.default)(window).on("hashchange",function(m){u.setInput(".clientdata_url_hash",window.location.hash)});let nn=T[".clientdata_singletons"]=(0,H.default)('script[type="application/shiny-singletons"]').text();Ri(nn.split(/,/));let rn=(0,H.default)('script[type="application/html-dependencies"]').text();H.default.each(rn.split(/;/),function(m,g){let R=/\s*^(.+)\[(.+)\]\s*$/.exec(g);R&&Nt(R[1],R[2])}),i.reset(T),e.connect(T),(0,H.default)(document).one("shiny:connected",function(){nr()})}function nr(){!window.Shiny||!window.Shiny.shinyapp||!window.Shiny.shinyapp.isConnected()||(0,H.default)(".shiny-frame-deferred").each(function(n,e){let t=(0,H.default)(e);t.removeClass("shiny-frame-deferred"),t.attr("src",t.attr("data-deferred-src")),t.attr("data-deferred-src",null)})}var N;function or(n){N=n,N.version="1.7.5.9000";let{inputBindings:e,fileInputBinding:t}=Pi(),{outputBindings:i}=Wi();xi(t),N.$escape=w,N.compareVersion=si,N.inputBindings=e,N.InputBinding=P,N.outputBindings=i,N.OutputBinding=J,N.resetBrush=Jt,N.notifications={show:Ie,remove:Te},N.modal={show:Ut,remove:Ft},N.addCustomMessageHandler=tr,N.showReconnectDialog=qt,N.hideReconnectDialog=jt,N.renderDependenciesAsync=ze,N.renderDependencies=Tn,N.renderContentAsync=te,N.renderContent=$i,N.renderHtmlAsync=ot,N.renderHtml=In,(0,rr.default)(function(){setTimeout(function(){ir(N)},1)})}function sr(){return window.navigator.userAgent}var en=M(E());function Zt(){return Ve().config}function ar(){(0,en.default)(document).on("keydown",function(n){if(n.which!==114||!n.ctrlKey&&!n.metaKey||n.shiftKey||n.altKey)return;let e="reactlog?w="+window.escape(Zt().workerId)+"&s="+window.escape(Zt().sessionId);window.open(e),n.preventDefault()}),(0,en.default)(document).on("keydown",function(n){if(!(n.which===115&&(n.ctrlKey||n.metaKey)&&!n.shiftKey&&!n.altKey||n.which===114&&(n.ctrlKey||n.metaKey)&&n.shiftKey&&!n.altKey))return;let e="reactlog/mark?w="+window.escape(Zt().workerId)+"&s="+window.escape(Zt().sessionId);en.default.get(e,function(t){if(t!=="marked")return;Ie({html:'<span id="shiny-reactlog-mark-text">Marked time point in reactlog</span>',closeButton:!0})}).fail(function(){window.open(e)}),n.preventDefault()})}function ur(){or(Kn()),Gn(sr()),Yn(),Qn(),Nn(),ar()}ur();})();
//# sourceMappingURL=shiny.min.js.map
